(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"8e26":function(t,e,i){"use strict";i.r(e),i.d(e,"HiveModule",function(){return z});var c=i("ofXK"),a=i("tyNb"),n=i("Dh3D"),r=i("+0xr"),o=i("XNiG"),s=i("vkgz"),b=i("1G5W"),l=i("fXoL"),u=i("Cfvw"),d=i("LRne"),m=i("lJxs"),h=i("I/3d"),v=i("i6m5");let f=(()=>{class t{constructor(t,e){this.angularFirestore=t,this.authService=e}get collectionPath(){return`beez/${this.authService.uid}/hives`}createHive(t){return Object(u.a)(this.angularFirestore.collection(this.collectionPath).add(t))}deleteHive(t){return this.angularFirestore.doc(`${this.collectionPath}/${t.id}`).delete(),Object(d.a)(!0)}getHive(t){return this.angularFirestore.collection(this.collectionPath).doc(t).get().pipe(Object(m.a)(t=>t.data()),Object(m.a)(e=>e?Object.assign(Object.assign({},e),{id:t}):e))}getHives(){return this.angularFirestore.collection(this.collectionPath).valueChanges({idField:"id"})}updateHive(t){const e=this.angularFirestore.collection(this.collectionPath).doc(t.id);return e.update(t),e.get().pipe(Object(m.a)(t=>t.data()))}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(h.a),l.Yb(v.a))},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("Wp6s"),g=i("bTqV"),T=i("1jcm");function k(t,e){1&t&&(l.Ub(0,"th",8),l.uc(1," Name "),l.Tb())}function U(t,e){if(1&t&&(l.Ub(0,"td",9),l.uc(1),l.Tb()),2&t){const t=e.$implicit;l.Db(1),l.wc(" ",t.name," ")}}function w(t,e){1&t&&(l.Ub(0,"th",8),l.uc(1," Active "),l.Tb())}function O(t,e){if(1&t&&(l.Ub(0,"td",9),l.Pb(1,"mat-slide-toggle",10),l.Tb()),2&t){const t=e.$implicit;l.Db(1),l.jc("checked",t.active)("disabled",!0)}}function j(t,e){1&t&&l.Pb(0,"tr",11)}function y(t,e){if(1&t){const t=l.Vb();l.Ub(0,"tr",12),l.bc("click",function(){l.nc(t);const i=e.$implicit;return l.ec().select(i)}),l.Tb()}}let D=(()=>{class t{constructor(t,e,i){this.router=t,this.route=e,this.hiveService=i,this.dataSource=new r.k,this.displayedColumns=["name","isActive"],this.destroy$=new o.a}ngOnInit(){this.hiveService.getHives().pipe(Object(s.a)(t=>this.dataSource.data=t),Object(b.a)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.dataSource.sort=this.sort}addHive(){this.router.navigate(["add"],{relativeTo:this.route})}select(t){this.router.navigate(["details",t.id],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(a.b),l.Ob(a.a),l.Ob(f))},t.\u0275cmp=l.Ib({type:t,selectors:[["bee-hive-list"]],viewQuery:function(t,e){if(1&t&&l.xc(n.a,1),2&t){let t;l.lc(t=l.cc())&&(e.sort=t.first)}},decls:17,vars:4,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isActive"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary","type","button",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"checked","disabled"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"mat-card"),l.Ub(1,"mat-card-header"),l.Ub(2,"mat-card-title"),l.uc(3,"Hives"),l.Tb(),l.Tb(),l.Ub(4,"mat-card-content"),l.Ub(5,"table",0),l.Sb(6,1),l.tc(7,k,2,0,"th",2),l.tc(8,U,2,1,"td",3),l.Rb(),l.Sb(9,4),l.tc(10,w,2,0,"th",2),l.tc(11,O,2,2,"td",3),l.Rb(),l.tc(12,j,1,0,"tr",5),l.tc(13,y,1,0,"tr",6),l.Tb(),l.Tb(),l.Ub(14,"mat-card-actions"),l.Ub(15,"button",7),l.bc("click",function(){return e.addHive()}),l.uc(16," Add new "),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Db(5),l.jc("dataSource",e.dataSource),l.Db(7),l.jc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),l.Db(1),l.jc("matRowDefColumns",e.displayedColumns))},directives:[p.a,p.e,p.h,p.d,r.j,n.a,r.c,r.e,r.b,r.g,r.i,p.b,g.a,r.d,n.b,r.a,T.a,r.f,r.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:75px}.mat-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}"]}),t})();var I=i("SxV6"),S=i("3Pt+"),C=i("kmnG"),P=i("qFsG"),H=i("iadO"),E=i("Tdyx");let $=(()=>{class t{constructor(t){this.formBuilder=t,this.submitEvent=new l.o,this.cancelEvent=new l.o,this.form=this.formBuilder.group({id:[""],name:["",S.n.required],active:[!0],date:[new Date,S.n.required],remarks:[""]})}set hive(t){var e;if(t){const i=null===(e=t.date)||void 0===e?void 0:e.toDate(),c=Object.assign(Object.assign({},t),{date:i});this.form.patchValue(c)}}ngOnInit(){}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&this.submitEvent.emit(Object.assign({},this.form.value))}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(S.d))},t.\u0275cmp=l.Ib({type:t,selectors:[["bee-hive-form"]],inputs:{hive:"hive"},outputs:{submitEvent:"submitEvent",cancelEvent:"cancelEvent"},decls:30,vars:4,consts:[[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],[1,"form-field"],["appearance","fill"],["matInput","","placeholder","Hive's name","formControlName","name"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker1",""],["matInput","","formControlName","remarks"],["formControlName","active"],["justify","right"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","type","submit","color","primary",3,"disabled"]],template:function(t,e){if(1&t&&(l.Ub(0,"form",0),l.bc("ngSubmit",function(){return e.submit()}),l.Pb(1,"input",1),l.Ub(2,"div",2),l.Ub(3,"mat-form-field",3),l.Ub(4,"mat-label"),l.uc(5,"Name*"),l.Tb(),l.Pb(6,"input",4),l.Ub(7,"mat-hint"),l.uc(8,"Hive name (required)"),l.Tb(),l.Tb(),l.Tb(),l.Ub(9,"div",2),l.Ub(10,"mat-form-field",3),l.Ub(11,"mat-label"),l.uc(12,"Date"),l.Tb(),l.Pb(13,"input",5),l.Pb(14,"mat-datepicker-toggle",6),l.Pb(15,"mat-datepicker",7,8),l.Tb(),l.Tb(),l.Ub(17,"div",2),l.Ub(18,"mat-form-field",3),l.Ub(19,"mat-label"),l.uc(20,"Remarks"),l.Tb(),l.Pb(21,"textarea",9),l.Tb(),l.Tb(),l.Ub(22,"div",2),l.Ub(23,"mat-slide-toggle",10),l.uc(24,"Is active"),l.Tb(),l.Tb(),l.Ub(25,"bee-button-bar",11),l.Ub(26,"button",12),l.bc("click",function(){return e.cancel()}),l.uc(27,"cancel"),l.Tb(),l.Ub(28,"button",13),l.uc(29,"save"),l.Tb(),l.Tb(),l.Tb()),2&t){const t=l.mc(16);l.jc("formGroup",e.form),l.Db(13),l.jc("matDatepicker",t),l.Db(1),l.jc("for",t),l.Db(14),l.jc("disabled",e.form.invalid||e.form.pristine)}},directives:[S.o,S.k,S.f,S.c,S.j,S.e,C.b,C.f,P.b,C.e,H.b,H.d,C.g,H.a,T.a,E.a,g.a],styles:[".form-field[_ngcontent-%COMP%]{align-items:center;display:flex;margin:.5rem 0;min-height:5rem}.mat-form-field[_ngcontent-%COMP%]{align-items:center;flex:1 1 auto}textarea[_ngcontent-%COMP%]{min-height:6rem}"]}),t})(),x=(()=>{class t{constructor(t,e,i){this.router=t,this.route=e,this.hiveService=i}get isEdit(){return!!this.hiveId}get hiveId(){return this.route.snapshot.paramMap.get("hiveId")}ngOnInit(){const t=this.hiveId;t&&(this.hive$=this.hiveService.getHive(t))}edit(t){(t.id?this.hiveService.updateHive(t):this.hiveService.createHive(t)).pipe(Object(I.a)(),Object(s.a)(()=>this.cancel())).subscribe()}cancel(){this.router.navigate([this.isEdit?"../..":".."],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(a.b),l.Ob(a.a),l.Ob(f))},t.\u0275cmp=l.Ib({type:t,selectors:[["bee-hive-edit"]],decls:4,vars:4,consts:[[1,"mat-title"],[3,"hive","cancelEvent","submitEvent"]],template:function(t,e){1&t&&(l.Ub(0,"h2",0),l.uc(1),l.Tb(),l.Ub(2,"bee-hive-form",1),l.bc("cancelEvent",function(){return e.cancel()})("submitEvent",function(t){return e.edit(t)}),l.fc(3,"async"),l.Tb()),2&t&&(l.Db(1),l.wc("",e.isEdit?"Edit":"Add"," hive"),l.Db(1),l.jc("hive",l.gc(3,2,e.hive$)))},directives:[$],pipes:[c.b],styles:[""]}),t})();var M=i("pLZG"),R=i("eIep"),N=i("n4x5"),A=i("0IaG"),G=i("MutI"),F=i("TeOG");function _(t,e){if(1&t&&(l.Ub(0,"mat-list-item",2),l.uc(1," Remarks "),l.Pb(2,"br"),l.uc(3),l.Tb()),2&t){const t=l.ec().$implicit;l.Db(3),l.wc(" ",t.remarks," ")}}function V(t,e){if(1&t){const t=l.Vb();l.Sb(0),l.Ub(1,"mat-card"),l.Ub(2,"mat-card-header"),l.Ub(3,"mat-card-title"),l.uc(4),l.Tb(),l.Tb(),l.Ub(5,"mat-card-content"),l.Ub(6,"mat-list",1),l.Ub(7,"mat-list-item",2),l.Ub(8,"span"),l.uc(9,"Active"),l.Tb(),l.Pb(10,"mat-slide-toggle",3),l.Tb(),l.Ub(11,"mat-list-item",2),l.Ub(12,"span"),l.uc(13,"Date"),l.Tb(),l.uc(14),l.fc(15,"timestamp"),l.Tb(),l.tc(16,_,4,1,"mat-list-item",4),l.Tb(),l.Tb(),l.Ub(17,"mat-card-actions"),l.Ub(18,"button",5),l.bc("click",function(){return l.nc(t),l.ec().back()}),l.uc(19,"back"),l.Tb(),l.Ub(20,"button",5),l.bc("click",function(){l.nc(t);const e=l.ec();return e.navigateToEdit(e.hiveId)}),l.uc(21,"edit"),l.Tb(),l.Ub(22,"button",6),l.bc("click",function(){l.nc(t);const i=e.$implicit;return l.ec().deleteHive(i)}),l.uc(23,"delete"),l.Tb(),l.Tb(),l.Tb(),l.Rb()}if(2&t){const t=e.$implicit;l.Db(4),l.wc("Hive ",t.name,""),l.Db(6),l.jc("checked",t.active)("disabled",!0),l.Db(4),l.wc(" ",l.gc(15,5,t.date)," "),l.Db(2),l.jc("ngIf",t.remarks)}}const q=[{path:"",component:D},{path:"add",component:x},{path:"details/:hiveId",component:(()=>{class t{constructor(t,e,i,c){this.dialog=t,this.router=e,this.route=i,this.hiveService=c}get hiveId(){return this.route.snapshot.paramMap.get("hiveId")}ngOnInit(){const t=this.hiveId;t&&(this.hive$=this.hiveService.getHive(t))}back(){this.router.navigate(["../.."],{relativeTo:this.route})}deleteHive(t,e){null==e||e.stopPropagation(),this.dialog.open(N.a,{data:{title:"Delete hive",content:`Are you sure you want to delete hive ${t.name}?`}}).afterClosed().pipe(Object(M.a)(t=>!!t),Object(R.a)(()=>this.hiveService.deleteHive(t).pipe(Object(s.a)(()=>this.back())))).subscribe()}navigateToEdit(t){t&&this.router.navigate(["../../edit",t],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(A.b),l.Ob(a.b),l.Ob(a.a),l.Ob(f))},t.\u0275cmp=l.Ib({type:t,selectors:[["bee-hive-details"]],decls:2,vars:3,consts:[[4,"ngIf"],["role","list"],["role","listitem"],[3,"checked","disabled"],["role","listitem",4,"ngIf"],["mat-stroked-button","",3,"click"],["mat-stroked-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(l.tc(0,V,24,7,"ng-container",0),l.fc(1,"async")),2&t&&l.jc("ngIf",l.gc(1,1,e.hive$))},directives:[c.l,p.a,p.e,p.h,p.d,G.a,G.b,T.a,p.b,g.a],pipes:[c.b,F.a],styles:["span[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t})()},{path:"edit/:hiveId",component:x}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({imports:[[a.e.forChild(q)],a.e]}),t})();var J=i("PCNd"),X=i("jAig");let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({imports:[[c.c,X.a,L,S.m,J.a]]}),t})()}}]);