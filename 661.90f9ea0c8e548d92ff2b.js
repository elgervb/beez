"use strict";(self.webpackChunkbeez=self.webpackChunkbeez||[]).push([[661],{661:(le,A,a)=>{a.r(A),a.d(A,{QueenModule:()=>se});var m=a(8583),d=a(2882),p=a(4269),U=a(4689),y=a(7540),g=a(9922),k=a(7316),e=a(7716),L=a(2238),M=a(9699),N=a(1964),Z=a(5207),I=a(2232),S=a(6282);let h=(()=>{class n{constructor(t,o){this.angularFirestore=t,this.authService=o}get collectionPath(){return`beez/${this.authService.uid}/queens`}createQueen(t){return(0,M.D)(this.angularFirestore.collection(this.collectionPath).add(t))}deleteQueen(t){return this.angularFirestore.doc(`${this.collectionPath}/${t.id}`).delete(),(0,N.of)(!0)}getQueen(t){return this.angularFirestore.collection(this.collectionPath).doc(t).get().pipe((0,Z.U)(o=>o.data()),(0,Z.U)(o=>o&&Object.assign(Object.assign({},o),{id:t})))}getQueens(){return this.angularFirestore.collection(this.collectionPath).valueChanges({idField:"id"})}updateQueen(t){const o=this.angularFirestore.collection(this.collectionPath).doc(t.id);return o.update(t),o.get().pipe((0,Z.U)(r=>r.data()))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(I.ST),e.LFG(S.e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var c=a(3738),q=a(7746),v=a(5396),Q=a(1095),b=a(3645),D=a(2234);function J(n,i){if(1&n&&(e.TgZ(0,"mat-list-item",2),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"i18nextCap"),e.qZA(),e._UZ(4,"bee-color-dot",7),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"color")),e.xp6(2),e.Q6J("color",t.color)}}function E(n,i){if(1&n&&(e.TgZ(0,"mat-list-item",2),e._uU(1),e.ALo(2,"i18nextCap"),e._UZ(3,"br"),e._uU(4),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,2,"remarks")," "),e.xp6(3),e.hij(" ",t.remarks," ")}}function O(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-header"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"i18nextCap"),e.qZA(),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"mat-list",1),e.TgZ(8,"mat-list-item",2),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"i18nextCap"),e.qZA(),e._UZ(12,"mat-slide-toggle",3),e.qZA(),e.YNc(13,J,5,4,"mat-list-item",4),e.TgZ(14,"mat-list-item",2),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"i18nextCap"),e.qZA(),e._uU(18),e.ALo(19,"timestamp"),e.qZA(),e.TgZ(20,"mat-list-item",2),e.TgZ(21,"span"),e._uU(22),e.ALo(23,"i18nextCap"),e.qZA(),e._UZ(24,"mat-slide-toggle",3),e.qZA(),e.YNc(25,E,5,4,"mat-list-item",4),e.qZA(),e.qZA(),e.TgZ(26,"mat-card-actions"),e.TgZ(27,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().back()}),e._uU(28),e.ALo(29,"i18next"),e.qZA(),e.TgZ(30,"button",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return r.navigateToEdit(r.queenId)}),e._uU(31),e.ALo(32,"i18next"),e.qZA(),e.TgZ(33,"button",6),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().deleteQueen(s)}),e._uU(34),e.ALo(35,"i18next"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=i.$implicit;e.xp6(4),e.AsE("",e.lcZ(5,15,"queen")," ",t.name,""),e.xp6(6),e.Oqu(e.lcZ(11,17,"active")),e.xp6(2),e.Q6J("checked",t.active)("disabled",!0),e.xp6(1),e.Q6J("ngIf",t.isMarked),e.xp6(3),e.Oqu(e.lcZ(17,19,"date")),e.xp6(2),e.hij(" ",e.lcZ(19,21,t.date)," "),e.xp6(4),e.Oqu(e.lcZ(23,23,"isMarked")),e.xp6(2),e.Q6J("checked",t.isMarked)("disabled",!0),e.xp6(1),e.Q6J("ngIf",t.remarks),e.xp6(3),e.Oqu(e.lcZ(29,25,"back")),e.xp6(3),e.Oqu(e.lcZ(32,27,"edit")),e.xp6(3),e.Oqu(e.lcZ(35,29,"delete"))}}let Y=(()=>{class n{constructor(t,o,r,s,x){this.route=t,this.router=o,this.dialog=r,this.queenService=s,this.i18NextService=x}get queenId(){return this.route.snapshot.paramMap.get("queenId")}ngOnInit(){const t=this.queenId;t&&(this.queen$=this.queenService.getQueen(t))}back(){this.router.navigate([".."],{relativeTo:this.route})}deleteQueen(t,o){null==o||o.stopPropagation(),this.dialog.open(k.X,{data:{title:`${this.i18NextService.format("delete","cap")} ${this.i18NextService.t("queen")}`,content:this.i18NextService.t("sentence.confirmDelete",{replace:{what:t.name}})}}).afterClosed().pipe((0,U.h)(r=>!!r),(0,y.w)(()=>this.queenService.deleteQueen(t).pipe((0,g.b)(()=>this.back())))).subscribe()}navigateToEdit(t){t&&this.router.navigate(["../edit",t],{relativeTo:this.route})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(L.uw),e.Y36(h),e.Y36(p.bu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-queen-details"]],decls:2,vars:3,consts:[[4,"ngIf"],["role","list"],["role","listitem"],[3,"checked","disabled"],["role","listitem",4,"ngIf"],["mat-stroked-button","",3,"click"],["mat-stroked-button","","color","warn",3,"click"],[3,"color"]],template:function(t,o){1&t&&(e.YNc(0,O,36,31,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.queen$))},directives:[m.O5,c.a8,c.dk,c.n5,c.dn,q.i$,q.Tg,v.Rr,c.hq,Q.lW,b.l],pipes:[m.Ov,p.Mz,D.d,p.e3],styles:["span[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})();var F=a(7920),u=a(3679),f=a(8295),$=a(9983),T=a(3220),j=a(8370);function R(n,i){1&n&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2,"Color"),e.qZA(),e._UZ(3,"input",16),e.TgZ(4,"mat-hint"),e._uU(5,"Queen is marked with this color"),e.qZA(),e.qZA())}let P=(()=>{class n{constructor(t){this.formBuilder=t,this.submitEvent=new e.vpe,this.cancelEvent=new e.vpe,this.form=this.formBuilder.group({id:[""],name:["",u.kI.required],active:[!0],isMarked:[!1],color:[""],date:[new Date,u.kI.required],remarks:[""]})}set queen(t){var o;if(t){const r=null===(o=t.date)||void 0===o?void 0:o.toDate(),s=Object.assign(Object.assign({},t),{date:r});this.form.patchValue(s)}}ngOnInit(){}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&this.submitEvent.emit(Object.assign({},this.form.value))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-queen-form"]],inputs:{queen:"queen"},outputs:{submitEvent:"submitEvent",cancelEvent:"cancelEvent"},decls:34,vars:5,consts:[[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],[1,"form-field"],["appearance","fill"],["matInput","","placeholder","Queen's name","formControlName","name"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker1",""],["matInput","","formControlName","remarks"],["formControlName","isMarked"],["appearance","fill",4,"ngIf"],["formControlName","active"],["justify","right"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","type","submit","color","primary",3,"disabled"],["matInput","","placeholder","Queed marked color","type","color","formControlName","color"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.submit()}),e._UZ(1,"input",1),e.TgZ(2,"div",2),e.TgZ(3,"mat-form-field",3),e.TgZ(4,"mat-label"),e._uU(5,"Name*"),e.qZA(),e._UZ(6,"input",4),e.TgZ(7,"mat-hint"),e._uU(8,"Queens name (required)"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"mat-form-field",3),e.TgZ(11,"mat-label"),e._uU(12,"Date"),e.qZA(),e._UZ(13,"input",5),e._UZ(14,"mat-datepicker-toggle",6),e._UZ(15,"mat-datepicker",7,8),e.qZA(),e.qZA(),e.TgZ(17,"div",2),e.TgZ(18,"mat-form-field",3),e.TgZ(19,"mat-label"),e._uU(20,"Remarks"),e.qZA(),e._UZ(21,"textarea",9),e.qZA(),e.qZA(),e.TgZ(22,"div",2),e.TgZ(23,"mat-slide-toggle",10),e._uU(24,"Is marked"),e.qZA(),e.YNc(25,R,6,0,"mat-form-field",11),e.qZA(),e.TgZ(26,"div",2),e.TgZ(27,"mat-slide-toggle",12),e._uU(28,"Is active"),e.qZA(),e.qZA(),e.TgZ(29,"bee-button-bar",13),e.TgZ(30,"button",14),e.NdJ("click",function(){return o.cancel()}),e._uU(31,"cancel"),e.qZA(),e.TgZ(32,"button",15),e._uU(33,"save"),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(16);let s;e.Q6J("formGroup",o.form),e.xp6(13),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(11),e.Q6J("ngIf",null==(s=o.form.get("isMarked"))?null:s.value),e.xp6(7),e.Q6J("disabled",o.form.invalid||o.form.pristine)}},directives:[u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,f.KE,f.hX,$.Nt,f.bx,T.hl,T.nW,f.R9,T.Mq,v.Rr,m.O5,j.N,Q.lW],styles:[".form-field[_ngcontent-%COMP%]{align-items:center;display:flex;margin:.5rem 0;min-height:5rem}.mat-form-field[_ngcontent-%COMP%]{align-items:center;flex:1 1 auto}textarea[_ngcontent-%COMP%]{min-height:6rem}"]}),n})(),_=(()=>{class n{constructor(t,o,r){this.route=t,this.location=o,this.queenService=r}get isEdit(){return!!this.queenId}get queenId(){return this.route.snapshot.paramMap.get("queenId")}ngOnInit(){const t=this.queenId;t&&(this.queen$=this.queenService.getQueen(t))}edit(t){const o=t.id?this.queenService.updateQueen(t):this.queenService.createQueen(t);null==o||o.pipe((0,F.P)(),(0,g.b)(()=>this.cancel())).subscribe()}cancel(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.gz),e.Y36(m.Ye),e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-queen-edit"]],decls:7,vars:4,consts:[[3,"queen","cancelEvent","submitEvent"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-header"),e.TgZ(2,"mat-card-title"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"mat-card-content"),e.TgZ(5,"bee-queen-form",0),e.NdJ("cancelEvent",function(){return o.cancel()})("submitEvent",function(s){return o.edit(s)}),e.ALo(6,"async"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij("",o.isEdit?"Edit":"Add"," queen"),e.xp6(2),e.Q6J("queen",e.lcZ(6,2,o.queen$)))},directives:[c.a8,c.dk,c.n5,c.dn,P],pipes:[m.Ov],styles:[""]}),n})();var C=a(1494),l=a(2789),z=a(6889),w=a(5755);function B(n,i){1&n&&(e.TgZ(0,"th",9),e._uU(1),e.ALo(2,"i18nextCap"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"name")," "))}function H(n,i){if(1&n&&(e.TgZ(0,"td",10),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function X(n,i){1&n&&(e.TgZ(0,"th",9),e._uU(1),e.ALo(2,"i18nextCap"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"isMarked")," "))}function G(n,i){if(1&n&&e._UZ(0,"bee-color-dot",13),2&n){const t=e.oxw().$implicit;e.Q6J("color",t.color)}}function W(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function V(n,i){if(1&n&&(e.TgZ(0,"td",10),e.YNc(1,G,1,1,"bee-color-dot",11),e.YNc(2,W,2,0,"span",12),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.isMarked),e.xp6(1),e.Q6J("ngIf",!t.isMarked)}}function K(n,i){1&n&&(e.TgZ(0,"th",9),e._uU(1),e.ALo(2,"i18nextCap"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"active")," "))}function ee(n,i){if(1&n&&(e.TgZ(0,"td",10),e._UZ(1,"mat-slide-toggle",14),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("checked",t.active)("disabled",!0)}}function te(n,i){1&n&&e._UZ(0,"tr",15)}function ne(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().select(s)}),e.qZA()}}const oe=function(){return{count:2}},ie=[{path:"",component:(()=>{class n{constructor(t,o,r){this.router=t,this.route=o,this.queenService=r,this.dataSource=new l.by,this.displayedColumns=["name","isMarked","isActive"],this.destroy$=new z.x}ngOnInit(){this.queenService.getQueens().pipe((0,g.b)(t=>this.dataSource.data=t),(0,w.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.dataSource.sort=this.sort}addQueen(){this.router.navigate(["add"],{relativeTo:this.route})}select(t){this.router.navigate([t.id],{relativeTo:this.route})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.F0),e.Y36(d.gz),e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-queen-list"]],viewQuery:function(t,o){if(1&t&&e.Gf(C.YE,5),2&t){let r;e.iGM(r=e.CRH())&&(o.sort=r.first)}},decls:22,vars:12,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isMarked"],["matColumnDef","isActive"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary","type","button",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"color",4,"ngIf"],[4,"ngIf"],[3,"color"],[3,"checked","disabled"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-header"),e.TgZ(2,"mat-card-title"),e._uU(3),e.ALo(4,"i18nextCap"),e.qZA(),e.qZA(),e.TgZ(5,"mat-card-content"),e.TgZ(6,"table",0),e.ynx(7,1),e.YNc(8,B,3,3,"th",2),e.YNc(9,H,2,1,"td",3),e.BQk(),e.ynx(10,4),e.YNc(11,X,3,3,"th",2),e.YNc(12,V,3,2,"td",3),e.BQk(),e.ynx(13,5),e.YNc(14,K,3,3,"th",2),e.YNc(15,ee,2,2,"td",3),e.BQk(),e.YNc(16,te,1,0,"tr",6),e.YNc(17,ne,1,0,"tr",7),e.qZA(),e.qZA(),e.TgZ(18,"mat-card-actions"),e.TgZ(19,"button",8),e.NdJ("click",function(){return o.addQueen()}),e._uU(20),e.ALo(21,"i18nextCap"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.xi3(4,6,"queen",e.DdM(11,oe))),e.xp6(3),e.Q6J("dataSource",o.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(3),e.hij(" ",e.lcZ(21,9,"add")," "))},directives:[c.a8,c.dk,c.n5,c.dn,l.BZ,C.YE,l.w1,l.fO,l.Dz,l.as,l.nj,c.hq,Q.lW,l.ge,C.nU,l.ev,m.O5,b.l,v.Rr,l.XQ,l.Gk],pipes:[p.Mz],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:75px}.mat-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}"]}),n})()},{path:"add",component:_},{path:"edit/:queenId",component:_},{path:":queenId",component:Y}];let ae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.Bz.forChild(ie)],d.Bz]}),n})();var re=a(793),ce=a(4466);let se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,p.zH,re.q,ae,u.UX,ce.m]]}),n})()}}]);