(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{fp69:function(e,t,n){"use strict";n.r(t),n.d(t,"QueenModule",function(){return L});var a=n("ofXK"),i=n("tyNb"),c=n("Dh3D"),r=n("+0xr"),o=n("XNiG"),s=n("vkgz"),u=n("1G5W"),l=n("pLZG"),b=n("n4x5"),d=n("fXoL"),m=n("0IaG"),f=n("Cfvw"),h=n("LRne"),p=n("lJxs"),g=n("I/3d"),v=n("i6m5");let T=(()=>{class e{constructor(e,t){this.angularFirestore=e,this.authService=t}get collectionPath(){return`beez/${this.authService.uid}/queens`}createQueen(e){return Object(f.a)(this.angularFirestore.collection(this.collectionPath).add(e))}deleteQueen(e){return this.angularFirestore.doc(`${this.collectionPath}/${e.id}`).delete(),Object(h.a)()}getQueen(e){return this.angularFirestore.collection(this.collectionPath).doc(e).get().pipe(Object(p.a)(e=>e.data()),Object(p.a)(t=>t?Object.assign(Object.assign({},t),{id:e}):t))}getQueens(){return this.angularFirestore.collection(this.collectionPath).valueChanges({idField:"id"})}updateQueen(e){const t=this.angularFirestore.collection(this.collectionPath).doc(e.id);return t.update(e),t.get().pipe(Object(p.a)(e=>e.data()))}}return e.\u0275fac=function(t){return new(t||e)(d.Yb(g.a),d.Yb(v.a))},e.\u0275prov=d.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=n("Wp6s"),k=n("bTqV"),U=n("1jcm");function y(e,t){1&e&&(d.Ub(0,"th",10),d.uc(1," Name "),d.Tb())}function O(e,t){if(1&e&&(d.Ub(0,"td",11),d.uc(1),d.Tb()),2&e){const e=t.$implicit;d.Db(1),d.wc(" ",e.name," ")}}function D(e,t){1&e&&(d.Ub(0,"th",10),d.uc(1," Active "),d.Tb())}function j(e,t){if(1&e&&(d.Ub(0,"td",11),d.Pb(1,"mat-slide-toggle",12),d.Tb()),2&e){const e=t.$implicit;d.Db(1),d.jc("checked",e.active)("disabled",!0)}}function q(e,t){1&e&&(d.Ub(0,"th",13),d.uc(1," Actions "),d.Tb())}function C(e,t){if(1&e){const e=d.Vb();d.Ub(0,"td",11),d.Ub(1,"button",14),d.bc("click",function(n){d.nc(e);const a=t.$implicit;return d.ec().deleteQueen(a,n)}),d.uc(2,"delete"),d.Tb(),d.Tb()}}function S(e,t){1&e&&d.Pb(0,"tr",15)}function P(e,t){if(1&e){const e=d.Vb();d.Ub(0,"tr",16),d.bc("click",function(){d.nc(e);const n=t.$implicit;return d.ec().select(n)}),d.Tb()}}let I=(()=>{class e{constructor(e,t,n,a){this.router=e,this.route=t,this.dialog=n,this.queenService=a,this.dataSource=new r.k,this.displayedColumns=["name","isActive","actions"],this.destroy$=new o.a}ngOnInit(){this.queenService.getQueens().pipe(Object(s.a)(e=>this.dataSource.data=e),Object(u.a)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.dataSource.sort=this.sort}addQueen(){this.router.navigate(["add"],{relativeTo:this.route})}deleteQueen(e,t){null==t||t.stopPropagation(),this.dialog.open(b.a,{data:{title:"Delete queen",content:`Are you sure you want to delete queen ${e.name}?`}}).afterClosed().pipe(Object(l.a)(e=>!!e),Object(s.a)(()=>this.queenService.deleteQueen(e))).subscribe()}select(e){this.router.navigate(["edit",e.id],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(d.Ob(i.b),d.Ob(i.a),d.Ob(m.b),d.Ob(T))},e.\u0275cmp=d.Ib({type:e,selectors:[["bee-queen"]],viewQuery:function(e,t){if(1&e&&d.xc(c.a,1),2&e){let e;d.lc(e=d.cc())&&(t.sort=e.first)}},decls:20,vars:4,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary","type","button",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"checked","disabled"],["mat-header-cell",""],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,t){1&e&&(d.Ub(0,"mat-card"),d.Ub(1,"mat-card-header"),d.Ub(2,"mat-card-title"),d.uc(3,"Queens"),d.Tb(),d.Tb(),d.Ub(4,"mat-card-content"),d.Ub(5,"table",0),d.Sb(6,1),d.tc(7,y,2,0,"th",2),d.tc(8,O,2,1,"td",3),d.Rb(),d.Sb(9,4),d.tc(10,D,2,0,"th",2),d.tc(11,j,2,2,"td",3),d.Rb(),d.Sb(12,5),d.tc(13,q,2,0,"th",6),d.tc(14,C,3,0,"td",3),d.Rb(),d.tc(15,S,1,0,"tr",7),d.tc(16,P,1,0,"tr",8),d.Tb(),d.Tb(),d.Ub(17,"mat-card-actions"),d.Ub(18,"button",9),d.bc("click",function(){return t.addQueen()}),d.uc(19," Add new "),d.Tb(),d.Tb(),d.Tb()),2&e&&(d.Db(5),d.jc("dataSource",t.dataSource),d.Db(10),d.jc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),d.Db(1),d.jc("matRowDefColumns",t.displayedColumns))},directives:[w.a,w.e,w.h,w.d,r.j,c.a,r.c,r.e,r.b,r.g,r.i,w.b,k.a,r.d,c.b,r.a,U.a,r.f,r.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:75px}.mat-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}"]}),e})();var Q=n("SxV6"),$=n("3Pt+"),E=n("kmnG"),x=n("qFsG"),M=n("iadO"),N=n("Tdyx");function R(e,t){1&e&&(d.Ub(0,"mat-form-field",3),d.Ub(1,"mat-label"),d.uc(2,"Color"),d.Tb(),d.Pb(3,"input",16),d.Ub(4,"mat-hint"),d.uc(5,"Queen is marked with this color"),d.Tb(),d.Tb())}let A=(()=>{class e{constructor(e){this.formBuilder=e,this.submitEvent=new d.o,this.cancelEvent=new d.o,this.form=this.formBuilder.group({id:[""],name:["",$.n.required],active:[!0],isMarked:[!1],color:[""],date:[new Date,$.n.required],remarks:[""]})}set queen(e){var t;if(e){const n=null===(t=e.date)||void 0===t?void 0:t.toDate(),a=Object.assign(Object.assign({},e),{date:n});this.form.patchValue(a)}}ngOnInit(){}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&this.submitEvent.emit(Object.assign({},this.form.value))}}return e.\u0275fac=function(t){return new(t||e)(d.Ob($.d))},e.\u0275cmp=d.Ib({type:e,selectors:[["bee-queen-form"]],inputs:{queen:"queen"},outputs:{submitEvent:"submitEvent",cancelEvent:"cancelEvent"},decls:34,vars:5,consts:[[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],[1,"form-field"],["appearance","fill"],["matInput","","placeholder","Queen's name","formControlName","name"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker1",""],["matInput","","formControlName","remarks"],["formControlName","isMarked"],["appearance","fill",4,"ngIf"],["formControlName","active"],["justify","right"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","type","submit","color","primary",3,"disabled"],["matInput","","placeholder","Queed marked color","type","color","formControlName","color"]],template:function(e,t){if(1&e&&(d.Ub(0,"form",0),d.bc("ngSubmit",function(){return t.submit()}),d.Pb(1,"input",1),d.Ub(2,"div",2),d.Ub(3,"mat-form-field",3),d.Ub(4,"mat-label"),d.uc(5,"Name*"),d.Tb(),d.Pb(6,"input",4),d.Ub(7,"mat-hint"),d.uc(8,"Queens name (required)"),d.Tb(),d.Tb(),d.Tb(),d.Ub(9,"div",2),d.Ub(10,"mat-form-field",3),d.Ub(11,"mat-label"),d.uc(12,"Date"),d.Tb(),d.Pb(13,"input",5),d.Pb(14,"mat-datepicker-toggle",6),d.Pb(15,"mat-datepicker",7,8),d.Tb(),d.Tb(),d.Ub(17,"div",2),d.Ub(18,"mat-form-field",3),d.Ub(19,"mat-label"),d.uc(20,"Remarks"),d.Tb(),d.Pb(21,"textarea",9),d.Tb(),d.Tb(),d.Ub(22,"div",2),d.Ub(23,"mat-slide-toggle",10),d.uc(24,"Is marked"),d.Tb(),d.tc(25,R,6,0,"mat-form-field",11),d.Tb(),d.Ub(26,"div",2),d.Ub(27,"mat-slide-toggle",12),d.uc(28,"Is active"),d.Tb(),d.Tb(),d.Ub(29,"bee-button-bar",13),d.Ub(30,"button",14),d.bc("click",function(){return t.cancel()}),d.uc(31,"cancel"),d.Tb(),d.Ub(32,"button",15),d.uc(33,"save"),d.Tb(),d.Tb(),d.Tb()),2&e){const e=d.mc(16);let n=null;d.jc("formGroup",t.form),d.Db(13),d.jc("matDatepicker",e),d.Db(1),d.jc("for",e),d.Db(11),d.jc("ngIf",null==(n=t.form.get("isMarked"))?null:n.value),d.Db(7),d.jc("disabled",t.form.invalid||t.form.pristine)}},directives:[$.o,$.k,$.f,$.c,$.j,$.e,E.b,E.f,x.b,E.e,M.b,M.d,E.g,M.a,U.a,a.k,N.a,k.a],styles:[".form-field[_ngcontent-%COMP%]{align-items:center;display:flex;margin:.5rem 0;min-height:5rem}.mat-form-field[_ngcontent-%COMP%]{align-items:center;flex:1 1 auto}textarea[_ngcontent-%COMP%]{min-height:6rem}"]}),e})(),F=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.queenService=n,this.destroy$=new o.a}get isEdit(){return!!this.queenId}get queenId(){return this.route.snapshot.paramMap.get("queenId")}ngOnInit(){const e=this.queenId;e&&(this.queen$=this.queenService.getQueen(e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}edit(e){(e.id?this.queenService.updateQueen(e):this.queenService.createQueen(e)).pipe(Object(Q.a)(),Object(s.a)(()=>this.cancel())).subscribe()}cancel(){this.router.navigate([this.isEdit?"../..":".."],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(d.Ob(i.b),d.Ob(i.a),d.Ob(T))},e.\u0275cmp=d.Ib({type:e,selectors:[["bee-queen-edit"]],decls:4,vars:4,consts:[[1,"mat-title"],[3,"queen","cancelEvent","submitEvent"]],template:function(e,t){1&e&&(d.Ub(0,"h2",0),d.uc(1),d.Tb(),d.Ub(2,"bee-queen-form",1),d.bc("cancelEvent",function(){return t.cancel()})("submitEvent",function(e){return t.edit(e)}),d.fc(3,"async"),d.Tb()),2&e&&(d.Db(1),d.wc("",t.isEdit?"Edit":"Add"," queen"),d.Db(1),d.jc("queen",d.gc(3,2,t.queen$)))},directives:[A],pipes:[a.b],styles:[""]}),e})();const G=[{path:"",component:I},{path:"add",component:F},{path:"edit/:queenId",component:F}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({imports:[[i.e.forChild(G)],i.e]}),e})();var V=n("jAig"),_=n("PCNd");let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({imports:[[a.c,V.a,H,$.m,_.a]]}),e})()}}]);