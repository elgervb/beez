"use strict";(self.webpackChunkbeez=self.webpackChunkbeez||[]).push([[226],{8226:(w,h,i)=>{i.r(h),i.d(h,{InspectionModule:()=>K});var s=i(8583),c=i(2882),L=i(8047),t=i(7716),O=i(9699),U=i(2232),I=i(6282);let A=(()=>{class n{constructor(e,o){this.angularFirestore=e,this.authService=o}add(e,o){return(0,O.D)(this.angularFirestore.collection(this.collectionPath(o)).add(e))}getInspections(e,o=5){return this.angularFirestore.collection(this.collectionPath(e),l=>l.limit(o).orderBy("date","desc")).valueChanges({idField:"id"})}collectionPath(e){return`beez/${this.authService.uid}/hives/${e}/inspections`}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(U.ST),t.LFG(I.e))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=i(7746),q=i(8370),T=i(1095),b=i(2458),M=i(6627),P=i(3645),m=i(4269),B=i(2234);function N(n,a){if(1&n&&(t.TgZ(0,"mat-list-item"),t.TgZ(1,"h3",6),t._uU(2),t.ALo(3,"timestamp"),t.qZA(),t.TgZ(4,"p",7),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"i18next"),t.qZA(),t.TgZ(8,"span"),t._UZ(9,"mat-icon",8),t._UZ(10,"bee-color-dot",9),t.qZA(),t.TgZ(11,"span"),t.TgZ(12,"mat-icon",10),t._uU(13,"favorite_border"),t.qZA(),t.TgZ(14,"mat-icon",10),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit,o=t.oxw(2).$implicit,l=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,e.date),""),t.xp6(4),t.AsE("",t.lcZ(7,7,"honey")," ",l.honeyProgress(e),""),t.xp6(4),t.Q6J("color",l.queenPresentColor(e)),t.xp6(5),t.Oqu(l.trendingIconName(e,o))}}function _(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"bee-button-bar",3),t.TgZ(2,"a",4),t._uU(3),t.ALo(4,"i18next"),t.qZA(),t.qZA(),t.YNc(5,N,16,9,"mat-list-item",5),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(2),t.Q6J("relativeTo",o.route),t.xp6(1),t.Oqu(t.lcZ(4,3,"add")),t.xp6(2),t.Q6J("ngForOf",e)}}function J(n,a){if(1&n&&(t.TgZ(0,"mat-list"),t.YNc(1,_,6,5,"ng-container",2),t.qZA()),2&n){const e=a.$implicit;t.oxw();const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.length)("ngIfElse",o)}}const S=function(){return{count:2}};function Q(n,a){if(1&n&&(t.TgZ(0,"div",11),t.TgZ(1,"h3"),t._uU(2),t.ALo(3,"i18nextCap"),t.ALo(4,"i18next"),t.qZA(),t.TgZ(5,"p"),t.TgZ(6,"a",4),t._uU(7),t.ALo(8,"i18next"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,4,"none")," ",t.xi3(4,6,"inspections",t.DdM(11,S)),""),t.xp6(4),t.Q6J("relativeTo",e.route),t.xp6(1),t.Oqu(t.lcZ(8,9,"add"))}}let F=(()=>{class n{constructor(e,o){this.route=e,this.inspectionService=o}ngOnInit(){const e=this.route.snapshot.paramMap.get("hiveId");e&&(this.inspections$=this.inspectionService.getInspections(e,5).pipe((0,L.B)()))}queenPresentColor(e){return e.queen||e.eggs?"green":e.larva?"orange":"red"}honeyProgress(e){return e.honey&&e.honeyClosed?`${e.honey} / ${e.honeyClosed}`:"n/a"}trendingIconName(e,o){const l=null==o?void 0:o.indexOf(e);if(o&&void 0!==l&&-1!==l&&(!l||l+1!==(null==o?void 0:o.length))){const v=o[l+1];if(v){const C=e.health,y=v.health;return C>y?"trending_up":C<y?"trending_down":"compare_arrows"}}return"compare_arrows"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.gz),t.Y36(A))},n.\u0275cmp=t.Xpm({type:n,selectors:[["bee-inspection-list"]],decls:4,vars:3,consts:[[4,"ngIf"],["noInspections",""],[4,"ngIf","ngIfElse"],["justify","center"],["mat-raised-button","","routerLink","add",3,"relativeTo"],[4,"ngFor","ngForOf"],["matLine",""],["matLine","",1,"line"],["svgIcon","queen"],[3,"color"],["aria-hidden","false","aria-label","health trend"],[1,"notification"]],template:function(e,o){1&e&&(t.YNc(0,J,2,2,"mat-list",0),t.ALo(1,"async"),t.YNc(2,Q,9,12,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.inspections$))},directives:[s.O5,x.i$,q.N,T.zs,c.yS,s.sg,x.Tg,b.X2,M.Hw,P.l],pipes:[s.Ov,m.e3,B.d,m.Mz],styles:["mat-list-item[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;justify-content:space-between}mat-list-item[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{align-items:center;display:inline-flex;flex:1 1 33.333%}mat-list-item[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){justify-content:center}mat-list-item[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){justify-content:flex-end}bee-color-dot[_ngcontent-%COMP%], mat-icon[_ngcontent-%COMP%]{margin-left:.5rem}.notification[_ngcontent-%COMP%]{text-align:center}"]}),n})();var r=i(3679),G=i(4294),Y=i(9922),d=i(3738),j=i(9983),Z=i(3220),u=i(8295),p=i(7832),z=i(4436),W=i(5396);function $(n,a){1&n&&(t._uU(0),t.ALo(1,"i18nextCap")),2&n&&t.Oqu(t.lcZ(1,1,"honeySuper"))}function E(n,a){1&n&&(t._uU(0),t.ALo(1,"i18nextCap")),2&n&&t.Oqu(t.lcZ(1,1,"hiveBody"))}function k(n,a){1&n&&(t._uU(0),t.ALo(1,"i18nextCap")),2&n&&t.Oqu(t.lcZ(1,1,"overall"))}function D(n,a){1&n&&(t._uU(0),t.ALo(1,"i18nextCap")),2&n&&t.Oqu(t.lcZ(1,1,"done"))}const g=function(){return{count:2}},R=[{path:"",component:F},{path:"add",component:(()=>{class n{constructor(e,o,l,f){this.route=e,this.location=o,this.formBuilder=l,this.inspectionService=f,this.timestamp=new r.NI({value:new Date,disabled:!0},r.kI.required),this.honeySuperGroup=this.formBuilder.group({honey:[null],honeyClosed:[null]}),this.hiveBodyGroup=this.formBuilder.group({drones:[null],queen:[null],eggs:[null],larva:[null],closedBrood:[null],droneBrood:[null],queenBrood:[null],honeyFood:[null]}),this.overallGroup=this.formBuilder.group({health:[null,r.kI.required],remarks:[null]})}ngOnInit(){}formatLabel(e){return e?e+"%":""}submit(){const e=Object.assign(Object.assign(Object.assign({date:this.timestamp.value},this.honeySuperGroup.value),this.hiveBodyGroup.value),this.overallGroup.value),o=this.route.snapshot.paramMap.get("hiveId");o&&this.inspectionService.add(e,o).pipe((0,G.q)(1),(0,Y.b)(()=>this.location.back())).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.gz),t.Y36(s.Ye),t.Y36(r.qu),t.Y36(A))},n.\u0275cmp=t.Xpm({type:n,selectors:[["bee-inspection-add"]],decls:152,vars:116,consts:[["matInput","",1,"timestamp-input",3,"formControl","matDatepicker"],["matSuffix","",3,"for"],["touchUi","","disabled","false"],["picker",""],[3,"linear"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"formGroup"],[1,"form-field"],["max","100","min","0","step","5","tickInterval","5","thumbLabel","true","aria-label","honey","formControlName","honey",3,"displayWith"],["matInput","","hidden",""],["max","100","min","0","step","5","tickInterval","5","thumbLabel","true","aria-label","honey closed","formControlName","honeyClosed",3,"displayWith"],["mat-stroked-button","","color","primary","matStepperNext",""],["formControlName","eggs"],["formControlName","larva"],["formControlName","closedBrood"],["formControlName","droneBrood"],["formControlName","queenBrood"],["formControlName","drones"],["formControlName","queen"],["floatLabel","always"],["max","100","min","0","step","5","tickInterval","5","thumbLabel","true","aria-label","food","formControlName","honeyFood",3,"displayWith"],["mat-stroked-button","","matStepperPrevious",""],["mat-stroked-button","","matStepperNext","","color","primary"],["max","100","min","0","step","5","tickInterval","5","thumbLabel","true","aria-label","health","formControlName","health",3,"displayWith"],["matInput","","formControlName","remarks"],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.ALo(4,"i18nextCap"),t._UZ(5,"input",0),t._UZ(6,"mat-datepicker-toggle",1),t._UZ(7,"mat-datepicker",2,3),t.qZA(),t.qZA(),t.TgZ(9,"mat-card-content"),t.TgZ(10,"mat-vertical-stepper",4,5),t.TgZ(12,"mat-step",6),t.YNc(13,$,2,3,"ng-template",7),t.TgZ(14,"form",8),t.TgZ(15,"div",9),t.TgZ(16,"mat-form-field"),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"i18nextCap"),t.qZA(),t._UZ(20,"mat-slider",10),t._UZ(21,"textarea",11),t.qZA(),t.qZA(),t.TgZ(22,"div",9),t.TgZ(23,"mat-form-field"),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"i18nextCap"),t.ALo(27,"i18next"),t.qZA(),t._UZ(28,"mat-slider",12),t._UZ(29,"textarea",11),t.qZA(),t.qZA(),t.TgZ(30,"bee-button-bar"),t.TgZ(31,"button",13),t._uU(32),t.ALo(33,"i18nextCap"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"mat-step",6),t.YNc(35,E,2,3,"ng-template",7),t.TgZ(36,"form",8),t.TgZ(37,"div",9),t.TgZ(38,"mat-form-field"),t.TgZ(39,"mat-slide-toggle",14),t._uU(40),t.ALo(41,"i18nextCap"),t.qZA(),t.TgZ(42,"mat-hint"),t._uU(43),t.ALo(44,"i18next"),t.qZA(),t._UZ(45,"textarea",11),t.qZA(),t.qZA(),t.TgZ(46,"div",9),t.TgZ(47,"mat-form-field"),t.TgZ(48,"mat-slide-toggle",15),t._uU(49),t.ALo(50,"i18nextCap"),t.qZA(),t.TgZ(51,"mat-hint"),t._uU(52),t.ALo(53,"i18next"),t.qZA(),t._UZ(54,"textarea",11),t.qZA(),t.qZA(),t.TgZ(55,"div",9),t.TgZ(56,"mat-form-field"),t.TgZ(57,"mat-slide-toggle",16),t._uU(58),t.ALo(59,"i18nextCap"),t.ALo(60,"i18next"),t.qZA(),t.TgZ(61,"mat-hint"),t._uU(62),t.ALo(63,"i18next"),t.qZA(),t._UZ(64,"textarea",11),t.qZA(),t.qZA(),t.TgZ(65,"div",9),t.TgZ(66,"mat-form-field"),t.TgZ(67,"mat-slide-toggle",17),t._uU(68),t.ALo(69,"i18nextCap"),t.qZA(),t.TgZ(70,"mat-hint"),t._uU(71),t.ALo(72,"i18next"),t.qZA(),t._UZ(73,"textarea",11),t.qZA(),t.qZA(),t.TgZ(74,"div",9),t.TgZ(75,"mat-form-field"),t.TgZ(76,"mat-slide-toggle",18),t._uU(77),t.ALo(78,"i18nextCap"),t.qZA(),t.TgZ(79,"mat-hint"),t._uU(80),t.ALo(81,"i18next"),t.qZA(),t._UZ(82,"textarea",11),t.qZA(),t.qZA(),t.TgZ(83,"div",9),t.TgZ(84,"mat-form-field"),t.TgZ(85,"mat-slide-toggle",19),t._uU(86),t.ALo(87,"i18nextCap"),t.qZA(),t.TgZ(88,"mat-hint"),t._uU(89),t.ALo(90,"i18next"),t.qZA(),t._UZ(91,"textarea",11),t.qZA(),t.qZA(),t.TgZ(92,"div",9),t.TgZ(93,"mat-form-field"),t.TgZ(94,"mat-slide-toggle",20),t._uU(95),t.ALo(96,"i18nextCap"),t.qZA(),t.TgZ(97,"mat-hint"),t._uU(98),t.ALo(99,"i18next"),t.qZA(),t._UZ(100,"textarea",11),t.qZA(),t.qZA(),t.TgZ(101,"div",9),t.TgZ(102,"mat-form-field",21),t.TgZ(103,"mat-label"),t._uU(104),t.ALo(105,"i18nextCap"),t.ALo(106,"i18next"),t.qZA(),t._UZ(107,"mat-slider",22),t.TgZ(108,"mat-hint"),t._uU(109),t.ALo(110,"i18next"),t.qZA(),t._UZ(111,"textarea",11),t.qZA(),t.qZA(),t.TgZ(112,"bee-button-bar"),t.TgZ(113,"button",23),t._uU(114),t.ALo(115,"i18nextCap"),t.qZA(),t.TgZ(116,"button",24),t._uU(117),t.ALo(118,"i18nextCap"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(119,"mat-step",6),t.YNc(120,k,2,3,"ng-template",7),t.TgZ(121,"form",8),t.TgZ(122,"div",9),t.TgZ(123,"mat-form-field"),t.TgZ(124,"mat-label"),t._uU(125),t.ALo(126,"i18nextCap"),t.ALo(127,"i18next"),t.qZA(),t._UZ(128,"mat-slider",25),t._UZ(129,"textarea",11),t.qZA(),t.qZA(),t.TgZ(130,"div",9),t.TgZ(131,"mat-form-field"),t.TgZ(132,"mat-label"),t._uU(133),t.ALo(134,"i18nextCap"),t.qZA(),t._UZ(135,"textarea",26),t.qZA(),t.qZA(),t.TgZ(136,"bee-button-bar"),t.TgZ(137,"button",23),t._uU(138),t.ALo(139,"i18nextCap"),t.qZA(),t.TgZ(140,"button",24),t._uU(141),t.ALo(142,"i18nextCap"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(143,"mat-step"),t.YNc(144,D,2,3,"ng-template",7),t.TgZ(145,"bee-button-bar"),t.TgZ(146,"button",23),t._uU(147),t.ALo(148,"i18nextCap"),t.qZA(),t.TgZ(149,"button",27),t.NdJ("click",function(){return o.submit()}),t._uU(150),t.ALo(151,"i18nextCap"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const l=t.MAs(8);t.xp6(3),t.hij(" ",t.lcZ(4,46,"inspection")," "),t.xp6(2),t.Q6J("formControl",o.timestamp)("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(4),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",o.honeySuperGroup),t.xp6(2),t.Q6J("formGroup",o.honeySuperGroup),t.xp6(4),t.Oqu(t.lcZ(19,48,"honey")),t.xp6(2),t.Q6J("displayWith",o.formatLabel),t.xp6(5),t.AsE("",t.lcZ(26,50,"honey")," ",t.lcZ(27,52,"closed"),""),t.xp6(3),t.Q6J("displayWith",o.formatLabel),t.xp6(4),t.Oqu(t.lcZ(33,54,"next")),t.xp6(2),t.Q6J("stepControl",o.hiveBodyGroup),t.xp6(2),t.Q6J("formGroup",o.hiveBodyGroup),t.xp6(4),t.Oqu(t.xi3(41,56,"egg",t.DdM(113,g))),t.xp6(3),t.Oqu(t.lcZ(44,59,"sentence.eggsPresent")),t.xp6(6),t.Oqu(t.xi3(50,61,"larva",t.DdM(114,g))),t.xp6(3),t.Oqu(t.lcZ(53,64,"sentence.openBrood")),t.xp6(6),t.AsE("",t.lcZ(59,66,"closed")," ",t.lcZ(60,68,"brood"),""),t.xp6(4),t.Oqu(t.lcZ(63,70,"sentence.closedBrood")),t.xp6(6),t.Oqu(t.lcZ(69,72,"droneBrood")),t.xp6(3),t.Oqu(t.lcZ(72,74,"sentence.droneBroodPresent")),t.xp6(6),t.Oqu(t.lcZ(78,76,"queenBrood")),t.xp6(3),t.Oqu(t.lcZ(81,78,"sentence.queenBroodPresent")),t.xp6(6),t.Oqu(t.xi3(87,80,"drone",t.DdM(115,g))),t.xp6(3),t.Oqu(t.lcZ(90,83,"sentence.dronesPresent")),t.xp6(6),t.Oqu(t.lcZ(96,85,"queen")),t.xp6(3),t.Oqu(t.lcZ(99,87,"sentence.queenPresent")),t.xp6(6),t.AsE("",t.lcZ(105,89,"food")," (",t.lcZ(106,91,"honey"),")"),t.xp6(3),t.Q6J("displayWith",o.formatLabel),t.xp6(2),t.hij("",t.lcZ(110,93,"sentence.hiveBodyFood"),"."),t.xp6(5),t.Oqu(t.lcZ(115,95,"back")),t.xp6(3),t.Oqu(t.lcZ(118,97,"next")),t.xp6(2),t.Q6J("stepControl",o.overallGroup),t.xp6(2),t.Q6J("formGroup",o.overallGroup),t.xp6(4),t.AsE("",t.lcZ(126,99,"overall")," ",t.lcZ(127,101,"health"),""),t.xp6(3),t.Q6J("displayWith",o.formatLabel),t.xp6(5),t.Oqu(t.lcZ(134,103,"remarks")),t.xp6(5),t.Oqu(t.lcZ(139,105,"back")),t.xp6(3),t.Oqu(t.lcZ(142,107,"next")),t.xp6(6),t.Oqu(t.lcZ(148,109,"back")),t.xp6(3),t.Oqu(t.lcZ(151,111,"done"))}},directives:[d.a8,d.dk,d.n5,j.Nt,r.Fj,Z.hl,r.JJ,r.oH,Z.nW,u.R9,Z.Mq,d.dn,p.Vq,p.C0,p.VY,r._Y,r.JL,r.sg,u.KE,u.hX,z.pH,r.u,q.N,T.lW,p.Ic,W.Rr,u.bx,p.fd],pipes:[m.Mz,m.e3],styles:[".form-field[_ngcontent-%COMP%]{align-items:center;display:flex;margin:.5rem 0;min-height:5rem}mat-form-field[_ngcontent-%COMP%]{flex:1 1 auto}.mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{align-self:center;display:inline-flex;width:150px}.mat-form-field[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{max-width:320px;width:100%}textarea[_ngcontent-%COMP%]{height:10rem;width:100%}.timestamp-input[_ngcontent-%COMP%]{border:none;background:transparent;color:inherit;font:inherit;width:7rem}"]}),n})()}];let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(R)],c.Bz]}),n})();var H=i(793),V=i(4466);let K=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s.ez,m.zH,X,r.UX,H.q,V.m]]}),n})()}}]);