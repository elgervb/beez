(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{fp69:function(e,t,n){"use strict";n.r(t),n.d(t,"QueenModule",function(){return ee});var c=n("ofXK"),i=n("tyNb"),a=n("pLZG"),o=n("eIep"),r=n("vkgz"),s=n("n4x5"),l=n("fXoL"),b=n("0IaG"),u=n("Cfvw"),d=n("LRne"),m=n("lJxs"),f=n("I/3d"),h=n("i6m5");let p=(()=>{class e{constructor(e,t){this.angularFirestore=e,this.authService=t}get collectionPath(){return`beez/${this.authService.uid}/queens`}createQueen(e){return Object(u.a)(this.angularFirestore.collection(this.collectionPath).add(e))}deleteQueen(e){return this.angularFirestore.doc(`${this.collectionPath}/${e.id}`).delete(),Object(d.a)(!0)}getQueen(e){return this.angularFirestore.collection(this.collectionPath).doc(e).get().pipe(Object(m.a)(e=>e.data()),Object(m.a)(t=>t?Object.assign(Object.assign({},t),{id:e}):t))}getQueens(){return this.angularFirestore.collection(this.collectionPath).valueChanges({idField:"id"})}updateQueen(e){const t=this.angularFirestore.collection(this.collectionPath).doc(e.id);return t.update(e),t.get().pipe(Object(m.a)(e=>e.data()))}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(f.a),l.Zb(h.a))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n("Wp6s"),v=n("MutI"),w=n("1jcm"),k=n("bTqV");let V=(()=>{class e{constructor(){}get backgroundColor(){return this.color}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Jb({type:e,selectors:[["bee-color-dot"]],hostVars:2,hostBindings:function(e,t){2&e&&l.sc("background",t.backgroundColor)},inputs:{color:"color"},decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]{display:inline-block;border-radius:50%;box-shadow:0 0 2px 0 rgb(0 0 0/50%);min-height:1rem;min-width:1rem}"]}),e})();var U=n("TeOG");function y(e,t){if(1&e&&(l.Vb(0,"mat-list-item",2),l.Vb(1,"span"),l.wc(2,"Color"),l.Ub(),l.Qb(3,"bee-color-dot",7),l.Ub()),2&e){const e=l.fc().$implicit;l.Db(3),l.lc("color",e.color)}}function D(e,t){if(1&e&&(l.Vb(0,"mat-list-item",2),l.wc(1," Remarks "),l.Qb(2,"br"),l.wc(3),l.Ub()),2&e){const e=l.fc().$implicit;l.Db(3),l.yc(" ",e.remarks," ")}}function q(e,t){if(1&e){const e=l.Wb();l.Tb(0),l.Vb(1,"mat-card"),l.Vb(2,"mat-card-header"),l.Vb(3,"mat-card-title"),l.wc(4),l.Ub(),l.Ub(),l.Vb(5,"mat-card-content"),l.Vb(6,"mat-list",1),l.Vb(7,"mat-list-item",2),l.Vb(8,"span"),l.wc(9,"Active"),l.Ub(),l.Qb(10,"mat-slide-toggle",3),l.Ub(),l.vc(11,y,4,1,"mat-list-item",4),l.Vb(12,"mat-list-item",2),l.Vb(13,"span"),l.wc(14,"Date"),l.Ub(),l.wc(15),l.gc(16,"timestamp"),l.Ub(),l.Vb(17,"mat-list-item",2),l.Vb(18,"span"),l.wc(19,"Marked"),l.Ub(),l.Qb(20,"mat-slide-toggle",3),l.Ub(),l.vc(21,D,4,1,"mat-list-item",4),l.Ub(),l.Ub(),l.Vb(22,"mat-card-actions"),l.Vb(23,"button",5),l.cc("click",function(){return l.pc(e),l.fc().back()}),l.wc(24,"back"),l.Ub(),l.Vb(25,"button",5),l.cc("click",function(){l.pc(e);const t=l.fc();return t.navigateToEdit(t.queenId)}),l.wc(26,"edit"),l.Ub(),l.Vb(27,"button",6),l.cc("click",function(){l.pc(e);const n=t.$implicit;return l.fc().deleteQueen(n)}),l.wc(28,"delete"),l.Ub(),l.Ub(),l.Ub(),l.Sb()}if(2&e){const e=t.$implicit;l.Db(4),l.yc("Queen ",e.name,""),l.Db(6),l.lc("checked",e.active)("disabled",!0),l.Db(1),l.lc("ngIf",e.isMarked),l.Db(4),l.yc(" ",l.hc(16,8,e.date)," "),l.Db(5),l.lc("checked",e.isMarked)("disabled",!0),l.Db(1),l.lc("ngIf",e.remarks)}}let I=(()=>{class e{constructor(e,t,n,c){this.route=e,this.router=t,this.dialog=n,this.queenService=c}get queenId(){return this.route.snapshot.paramMap.get("queenId")}ngOnInit(){const e=this.queenId;e&&(this.queen$=this.queenService.getQueen(e))}back(){this.router.navigate([".."],{relativeTo:this.route})}deleteQueen(e,t){null==t||t.stopPropagation(),this.dialog.open(s.a,{data:{title:"Delete queen",content:`Are you sure you want to delete queen ${e.name}?`}}).afterClosed().pipe(Object(a.a)(e=>!!e),Object(o.a)(()=>this.queenService.deleteQueen(e).pipe(Object(r.a)(()=>this.back())))).subscribe()}navigateToEdit(e){e&&this.router.navigate(["../edit",e],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(i.a),l.Pb(i.b),l.Pb(b.b),l.Pb(p))},e.\u0275cmp=l.Jb({type:e,selectors:[["bee-queen-details"]],decls:2,vars:3,consts:[[4,"ngIf"],["role","list"],["role","listitem"],[3,"checked","disabled"],["role","listitem",4,"ngIf"],["mat-stroked-button","",3,"click"],["mat-stroked-button","","color","warn",3,"click"],[3,"color"]],template:function(e,t){1&e&&(l.vc(0,q,29,10,"ng-container",0),l.gc(1,"async")),2&e&&l.lc("ngIf",l.hc(1,1,t.queen$))},directives:[c.l,g.a,g.e,g.h,g.d,v.a,v.b,w.a,g.b,k.a,V],pipes:[c.b,U.a],styles:["span[_ngcontent-%COMP%]{flex:1 1 auto}"]}),e})();var Q=n("SxV6"),C=n("3Pt+"),O=n("kmnG"),P=n("qFsG"),S=n("iadO"),M=n("Tdyx");function j(e,t){1&e&&(l.Vb(0,"mat-form-field",3),l.Vb(1,"mat-label"),l.wc(2,"Color"),l.Ub(),l.Qb(3,"input",16),l.Vb(4,"mat-hint"),l.wc(5,"Queen is marked with this color"),l.Ub(),l.Ub())}let $=(()=>{class e{constructor(e){this.formBuilder=e,this.submitEvent=new l.o,this.cancelEvent=new l.o,this.form=this.formBuilder.group({id:[""],name:["",C.n.required],active:[!0],isMarked:[!1],color:[""],date:[new Date,C.n.required],remarks:[""]})}set queen(e){var t;if(e){const n=null===(t=e.date)||void 0===t?void 0:t.toDate(),c=Object.assign(Object.assign({},e),{date:n});this.form.patchValue(c)}}ngOnInit(){}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&this.submitEvent.emit(Object.assign({},this.form.value))}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(C.d))},e.\u0275cmp=l.Jb({type:e,selectors:[["bee-queen-form"]],inputs:{queen:"queen"},outputs:{submitEvent:"submitEvent",cancelEvent:"cancelEvent"},decls:34,vars:5,consts:[[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],[1,"form-field"],["appearance","fill"],["matInput","","placeholder","Queen's name","formControlName","name"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker1",""],["matInput","","formControlName","remarks"],["formControlName","isMarked"],["appearance","fill",4,"ngIf"],["formControlName","active"],["justify","right"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","type","submit","color","primary",3,"disabled"],["matInput","","placeholder","Queed marked color","type","color","formControlName","color"]],template:function(e,t){if(1&e&&(l.Vb(0,"form",0),l.cc("ngSubmit",function(){return t.submit()}),l.Qb(1,"input",1),l.Vb(2,"div",2),l.Vb(3,"mat-form-field",3),l.Vb(4,"mat-label"),l.wc(5,"Name*"),l.Ub(),l.Qb(6,"input",4),l.Vb(7,"mat-hint"),l.wc(8,"Queens name (required)"),l.Ub(),l.Ub(),l.Ub(),l.Vb(9,"div",2),l.Vb(10,"mat-form-field",3),l.Vb(11,"mat-label"),l.wc(12,"Date"),l.Ub(),l.Qb(13,"input",5),l.Qb(14,"mat-datepicker-toggle",6),l.Qb(15,"mat-datepicker",7,8),l.Ub(),l.Ub(),l.Vb(17,"div",2),l.Vb(18,"mat-form-field",3),l.Vb(19,"mat-label"),l.wc(20,"Remarks"),l.Ub(),l.Qb(21,"textarea",9),l.Ub(),l.Ub(),l.Vb(22,"div",2),l.Vb(23,"mat-slide-toggle",10),l.wc(24,"Is marked"),l.Ub(),l.vc(25,j,6,0,"mat-form-field",11),l.Ub(),l.Vb(26,"div",2),l.Vb(27,"mat-slide-toggle",12),l.wc(28,"Is active"),l.Ub(),l.Ub(),l.Vb(29,"bee-button-bar",13),l.Vb(30,"button",14),l.cc("click",function(){return t.cancel()}),l.wc(31,"cancel"),l.Ub(),l.Vb(32,"button",15),l.wc(33,"save"),l.Ub(),l.Ub(),l.Ub()),2&e){const e=l.oc(16);let n=null;l.lc("formGroup",t.form),l.Db(13),l.lc("matDatepicker",e),l.Db(1),l.lc("for",e),l.Db(11),l.lc("ngIf",null==(n=t.form.get("isMarked"))?null:n.value),l.Db(7),l.lc("disabled",t.form.invalid||t.form.pristine)}},directives:[C.o,C.k,C.f,C.c,C.j,C.e,O.b,O.f,P.b,O.e,S.b,S.d,O.g,S.a,w.a,c.l,M.a,k.a],styles:[".form-field[_ngcontent-%COMP%]{align-items:center;display:flex;margin:.5rem 0;min-height:5rem}.mat-form-field[_ngcontent-%COMP%]{align-items:center;flex:1 1 auto}textarea[_ngcontent-%COMP%]{min-height:6rem}"]}),e})(),E=(()=>{class e{constructor(e,t,n){this.route=e,this.location=t,this.queenService=n}get isEdit(){return!!this.queenId}get queenId(){return this.route.snapshot.paramMap.get("queenId")}ngOnInit(){const e=this.queenId;e&&(this.queen$=this.queenService.getQueen(e))}edit(e){const t=e.id?this.queenService.updateQueen(e):this.queenService.createQueen(e);null==t||t.pipe(Object(Q.a)(),Object(r.a)(()=>this.cancel())).subscribe()}cancel(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(i.a),l.Pb(c.h),l.Pb(p))},e.\u0275cmp=l.Jb({type:e,selectors:[["bee-queen-edit"]],decls:7,vars:4,consts:[[3,"queen","cancelEvent","submitEvent"]],template:function(e,t){1&e&&(l.Vb(0,"mat-card"),l.Vb(1,"mat-card-header"),l.Vb(2,"mat-card-title"),l.wc(3),l.Ub(),l.Ub(),l.Vb(4,"mat-card-content"),l.Vb(5,"bee-queen-form",0),l.cc("cancelEvent",function(){return t.cancel()})("submitEvent",function(e){return t.edit(e)}),l.gc(6,"async"),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Db(3),l.yc("",t.isEdit?"Edit":"Add"," queen"),l.Db(2),l.lc("queen",l.hc(6,2,t.queen$)))},directives:[g.a,g.e,g.h,g.d,$],pipes:[c.b],styles:[""]}),e})();var x=n("Dh3D"),N=n("+0xr"),T=n("XNiG"),R=n("1G5W");function A(e,t){1&e&&(l.Vb(0,"th",9),l.wc(1," Name "),l.Ub())}function G(e,t){if(1&e&&(l.Vb(0,"td",10),l.wc(1),l.Ub()),2&e){const e=t.$implicit;l.Db(1),l.yc(" ",e.name," ")}}function F(e,t){1&e&&(l.Vb(0,"th",9),l.wc(1," Marked "),l.Ub())}function J(e,t){if(1&e&&l.Qb(0,"bee-color-dot",13),2&e){const e=l.fc().$implicit;l.lc("color",e.color)}}function _(e,t){1&e&&(l.Vb(0,"span"),l.wc(1,"-"),l.Ub())}function H(e,t){if(1&e&&(l.Vb(0,"td",10),l.vc(1,J,1,1,"bee-color-dot",11),l.vc(2,_,2,0,"span",12),l.Ub()),2&e){const e=t.$implicit;l.Db(1),l.lc("ngIf",e.isMarked),l.Db(1),l.lc("ngIf",!e.isMarked)}}function L(e,t){1&e&&(l.Vb(0,"th",9),l.wc(1," Active "),l.Ub())}function W(e,t){if(1&e&&(l.Vb(0,"td",10),l.Qb(1,"mat-slide-toggle",14),l.Ub()),2&e){const e=t.$implicit;l.Db(1),l.lc("checked",e.active)("disabled",!0)}}function z(e,t){1&e&&l.Qb(0,"tr",15)}function B(e,t){if(1&e){const e=l.Wb();l.Vb(0,"tr",16),l.cc("click",function(){l.pc(e);const n=t.$implicit;return l.fc().select(n)}),l.Ub()}}const X=[{path:"",component:(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.queenService=n,this.dataSource=new N.k,this.displayedColumns=["name","isMarked","isActive"],this.destroy$=new T.a}ngOnInit(){this.queenService.getQueens().pipe(Object(r.a)(e=>this.dataSource.data=e),Object(R.a)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.dataSource.sort=this.sort}addQueen(){this.router.navigate(["add"],{relativeTo:this.route})}select(e){this.router.navigate([e.id],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(i.b),l.Pb(i.a),l.Pb(p))},e.\u0275cmp=l.Jb({type:e,selectors:[["bee-queen-list"]],viewQuery:function(e,t){if(1&e&&l.zc(x.a,1),2&e){let e;l.nc(e=l.dc())&&(t.sort=e.first)}},decls:20,vars:4,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isMarked"],["matColumnDef","isActive"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-stroked-button","","color","primary","type","button",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"color",4,"ngIf"],[4,"ngIf"],[3,"color"],[3,"checked","disabled"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,t){1&e&&(l.Vb(0,"mat-card"),l.Vb(1,"mat-card-header"),l.Vb(2,"mat-card-title"),l.wc(3,"Queens"),l.Ub(),l.Ub(),l.Vb(4,"mat-card-content"),l.Vb(5,"table",0),l.Tb(6,1),l.vc(7,A,2,0,"th",2),l.vc(8,G,2,1,"td",3),l.Sb(),l.Tb(9,4),l.vc(10,F,2,0,"th",2),l.vc(11,H,3,2,"td",3),l.Sb(),l.Tb(12,5),l.vc(13,L,2,0,"th",2),l.vc(14,W,2,2,"td",3),l.Sb(),l.vc(15,z,1,0,"tr",6),l.vc(16,B,1,0,"tr",7),l.Ub(),l.Ub(),l.Vb(17,"mat-card-actions"),l.Vb(18,"button",8),l.cc("click",function(){return t.addQueen()}),l.wc(19," Add new "),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Db(5),l.lc("dataSource",t.dataSource),l.Db(10),l.lc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),l.Db(1),l.lc("matRowDefColumns",t.displayedColumns))},directives:[g.a,g.e,g.h,g.d,N.j,x.a,N.c,N.e,N.b,N.g,N.i,g.b,k.a,N.d,x.b,N.a,c.l,V,w.a,N.f,N.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:75px}.mat-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}"]}),e})()},{path:"add",component:E},{path:"edit/:queenId",component:E},{path:":queenId",component:I}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({imports:[[i.e.forChild(X)],i.e]}),e})();var K=n("jAig"),Y=n("PCNd");let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({imports:[[c.c,K.a,Z,C.m,Y.a]]}),e})()}}]);