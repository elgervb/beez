"use strict";(self.webpackChunkbeez=self.webpackChunkbeez||[]).push([[441],{6441:(K,E,r)=>{r.r(E),r.d(E,{LedgerEntryType:()=>s,LedgerModule:()=>R,LedgerRoutingModule:()=>M,LegderComponent:()=>Z});var e=r(7716),g=r(2882),m=r(171),A=r(9699),L=r(4294),h=r(9922),T=r(2232),O=r(749),u=r(3738),D=r(4762),a=r(3679),d=r(8295),f=r(3220),c=r(7299),P=r(1095),U=r(9983),p=r(4269),v=r(7746),_=r(8583),x=r(2458);function q(n,i){if(1&n&&(e.TgZ(0,"mat-list-item",2),e.TgZ(1,"div",3),e.TgZ(2,"span",4),e._uU(3),e.ALo(4,"timestamp"),e.qZA(),e.TgZ(5,"span",5),e._uU(6),e.qZA(),e.TgZ(7,"span",6),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.qZA(),e.TgZ(10,"p",7),e._uU(11),e.qZA(),e.qZA()),2&n){const t=i.$implicit;e.xp6(3),e.Oqu(e.xi3(4,4,t.date,"MM-dd-yyyy HH:ss")),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(9,7,t.amount)),e.xp6(3),e.Oqu(t.comment)}}let b=(()=>{class n{constructor(t,o){this.angularFirestore=t,this.authService=o}get collectionPath(){return`beez/${this.authService.uid}/ledger`}createEntry(t){return(0,A.D)(this.angularFirestore.collection(this.collectionPath).add(t))}getEntries(){return this.angularFirestore.collection(this.collectionPath,t=>t.orderBy("date","desc").limit(250)).valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.ST),e.LFG(O.e8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var s=(()=>{return(n=s||(s={})).expense="expense",n.income="income",s;var n})();let I=(()=>{class n{constructor(t){this.formBuilder=t,this.cancelEvent=new e.vpe,this.submitEvent=new e.vpe,this.form=this.formBuilder.group({type:[s.income,a.kI.required],date:[new Date],description:["",a.kI.required],amountEur:["",a.kI.required],amountCents:[""],comment:[""]})}cancel(){this.cancelEvent.emit(),this.resetForm()}submit(){var t,o;if(this.form.valid){const C=(0,D._T)(this.form.value,["amountEur","amountCents"]);C.amount=parseFloat(`${null===(t=this.form.get("amountEur"))||void 0===t?void 0:t.value}.${null===(o=this.form.get("amountCents"))||void 0===o?void 0:o.value}`),this.submitEvent.emit(C),this.resetForm()}}resetForm(){var t,o;this.form.reset(),null===(t=this.form.get("date"))||void 0===t||t.setValue(new Date),null===(o=this.form.get("type"))||void 0===o||o.setValue(s.income)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-ledger-entry-form"]],outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent"},decls:44,vars:25,consts:[[3,"formGroup","ngSubmit"],["appearance","fill",1,"date"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker",""],["appearance","fill",1,"amount-eur"],["matPrefix",""],["type","number","matInput","","formControlName","amountEur","autofocus",""],["matSuffix",""],["appearance","fill",1,"amount-cents"],["type","number","matInput","","matPostfix","","placeholder","00","formControlName","amountCents"],["appearance","fill",1,"description"],["matInput","","placeholder","Eg. Honey","formControlName","description","list","sell-list"],["id","sell-list"],["value","honey"],["appearance","fill",1,"full-width"],["matInput","","placeholder","comment","formControlName","comment"],["justify","right"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","type","submit","color","primary",3,"disabled"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.submit()}),e.TgZ(1,"div"),e.TgZ(2,"mat-form-field",1),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"i18nextCap"),e.qZA(),e._UZ(6,"input",2),e._UZ(7,"mat-datepicker-toggle",3),e._UZ(8,"mat-datepicker",4,5),e.qZA(),e.TgZ(10,"mat-label"),e._uU(11),e.ALo(12,"i18nextCap"),e.qZA(),e.qZA(),e.TgZ(13,"div"),e.TgZ(14,"mat-form-field",6),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"i18nextCap"),e.qZA(),e.TgZ(18,"span",7),e._uU(19,"EUR \xa0"),e.qZA(),e._UZ(20,"input",8),e.TgZ(21,"span",9),e._uU(22,","),e.qZA(),e.qZA(),e.TgZ(23,"mat-form-field",10),e._UZ(24,"input",11),e.qZA(),e.TgZ(25,"mat-form-field",12),e.TgZ(26,"mat-label"),e._uU(27),e.ALo(28,"i18nextCap"),e.qZA(),e._UZ(29,"input",13),e.qZA(),e.TgZ(30,"datalist",14),e._UZ(31,"option",15),e.qZA(),e.qZA(),e.TgZ(32,"mat-form-field",16),e.TgZ(33,"mat-label"),e._uU(34),e.ALo(35,"i18nextCap"),e.qZA(),e._UZ(36,"textarea",17),e.qZA(),e.TgZ(37,"bee-button-bar",18),e.TgZ(38,"button",19),e.NdJ("click",function(){return o.cancel()}),e._uU(39),e.ALo(40,"i18nextCap"),e.qZA(),e.TgZ(41,"button",20),e._uU(42),e.ALo(43,"i18nextCap"),e.qZA(),e.qZA(),e.qZA()),2&t){const l=e.MAs(9);e.Q6J("formGroup",o.form),e.xp6(4),e.Oqu(e.lcZ(5,11,"date")),e.xp6(2),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(4),e.Oqu(e.lcZ(12,13,"sale")),e.xp6(5),e.Oqu(e.lcZ(17,15,"amount")),e.xp6(11),e.Oqu(e.lcZ(28,17,"description")),e.xp6(7),e.Oqu(e.lcZ(35,19,"sentence.leaveComment")),e.xp6(5),e.Oqu(e.lcZ(40,21,"cancel")),e.xp6(2),e.Q6J("disabled",o.form.invalid||o.form.pristine),e.xp6(1),e.Oqu(e.lcZ(43,23,"save"))}},directives:[a._Y,a.JL,a.sg,d.KE,d.hX,U.Nt,a.Fj,f.hl,a.JJ,a.u,f.nW,d.R9,f.Mq,d.qo,a.wV,a.YN,a.Kr,c.N3,P.lW],pipes:[p.Mz],styles:[".form-field-group[_ngcontent-%COMP%]{display:flex;width:100%}.date[_ngcontent-%COMP%]{margin-right:.5rem}.amount-eur[_ngcontent-%COMP%]{text-align:right;width:7rem}.amount-cents[_ngcontent-%COMP%]{margin-right:.5rem;width:2.5rem}.description[_ngcontent-%COMP%]{width:8.3rem}.full-width[_ngcontent-%COMP%]{width:100%}"]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-entry-list"]],inputs:{entries:"entries"},decls:2,vars:1,consts:[["role","list"],["role","listitem",4,"ngFor","ngForOf"],["role","listitem"],["matLine","",1,"line"],[1,"date"],[1,"description"],[1,"amount"],["matLine","",1,"comments"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-list",0),e.YNc(1,q,12,9,"mat-list-item",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.entries))},directives:[v.i$,_.sg,v.Tg,x.X2],pipes:[c.dS,_.H9],styles:[".mat-line.line[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.comments[_ngcontent-%COMP%]{font-size:.8em;opacity:.75}.amount[_ngcontent-%COMP%]{text-align:right}"]}),n})(),Z=(()=>{class n{constructor(t,o){this.ledgerService=t,this.route=o}ngOnInit(){this.year=this.route.snapshot.paramMap.get("year"),this.entries$=this.ledgerService.getEntries()}addEntry(t){this.ledgerService.createEntry(t).pipe((0,L.q)(1),(0,h.b)(()=>this.collapse())).subscribe()}collapse(){this.expansionPanel.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b),e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-legder"]],viewQuery:function(t,o){if(1&t&&e.Gf(m.ib,5),2&t){let l;e.iGM(l=e.CRH())&&(o.expansionPanel=l.first)}},decls:18,vars:16,consts:[[3,"cancelEvent","submitEvent"],[3,"entries"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-header"),e.TgZ(2,"mat-card-title"),e._uU(3),e.ALo(4,"i18nextCap"),e.ALo(5,"i18next"),e.qZA(),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"mat-expansion-panel"),e.TgZ(8,"mat-expansion-panel-header"),e.TgZ(9,"mat-panel-title"),e._uU(10),e.ALo(11,"i18nextCap"),e.qZA(),e.TgZ(12,"mat-panel-description"),e._uU(13),e.ALo(14,"i18nextCap"),e.qZA(),e.qZA(),e.TgZ(15,"bee-ledger-entry-form",0),e.NdJ("cancelEvent",function(){return o.collapse()})("submitEvent",function(y){return o.addEntry(y)}),e.qZA(),e.qZA(),e._UZ(16,"bee-entry-list",1),e.ALo(17,"async"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.lnq("",e.lcZ(4,6,"ledger.ledger")," ",e.lcZ(5,8,"ledger.for")," ",o.year,""),e.xp6(7),e.hij(" ",e.lcZ(11,10,"add")," + "),e.xp6(3),e.hij(" ",e.lcZ(14,12,"ledger.sentence.addNewEntry")," "),e.xp6(3),e.Q6J("entries",e.lcZ(17,14,o.entries$)))},directives:[u.a8,u.dk,u.n5,u.dn,m.ib,m.yz,m.yK,m.u4,I,B],pipes:[p.Mz,p.e3,_.Ov],styles:[""]}),n})();const F=[{path:":year",component:Z},{path:"**",redirectTo:(new Date).getFullYear().toString()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(F)],g.Bz]}),n})(),R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.ez,c.Kk,p.zH,M,c.qX,a.UX]]}),n})()}}]);