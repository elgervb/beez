(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{yf6I:function(t,e,n){"use strict";n.r(e),n.d(e,"InspectionModule",function(){return T});var o=n("ofXK"),r=n("tyNb"),a=n("w1tV");const i=(t,e)=>{var n;return(null===(n=t.paramMap)||void 0===n?void 0:n.get(e))||t.children.reduce((t,n)=>t||(n.paramMap.has(e)?n.paramMap.get(e):i(n,e)),null)};var c=n("fXoL"),b=n("Cfvw"),l=n("I/3d"),s=n("i6m5");let m=(()=>{class t{constructor(t,e){this.angularFirestore=t,this.authService=e}add(t,e){return Object(b.a)(this.angularFirestore.collection(this.collectionPath(e)).add(t))}getInspections(t,e=5){return this.angularFirestore.collection(this.collectionPath(t),t=>t.limit(e).orderBy("date","desc")).valueChanges({idField:"id"})}collectionPath(t){return`beez/${this.authService.uid}/hives/${t}/inspections`}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(l.a),c.Zb(s.a))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=n("MutI"),d=n("Tdyx"),p=n("bTqV"),h=n("FKr1"),f=n("Pm42"),g=n("NFeN"),v=n("TeOG");function V(t,e){if(1&t&&(c.Vb(0,"mat-list-item"),c.Vb(1,"h3",6),c.wc(2),c.gc(3,"timestamp"),c.Ub(),c.Vb(4,"p",7),c.Vb(5,"span"),c.wc(6),c.Ub(),c.Vb(7,"span"),c.wc(8,"queen "),c.Qb(9,"bee-color-dot",8),c.Ub(),c.Vb(10,"span"),c.wc(11,"health "),c.Vb(12,"mat-icon",9),c.wc(13),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t){const t=e.$implicit,n=e.index,o=c.fc(2).$implicit,r=c.fc();c.Db(2),c.yc(" ",c.hc(3,4,t.date),""),c.Db(4),c.yc("honey ",r.honeyString(t),""),c.Db(3),c.kc("color",r.queenPresentColor(t)),c.Db(4),c.xc(r.trendingIconName(t,o[n]))}}function U(t,e){if(1&t&&(c.Tb(0),c.Vb(1,"bee-button-bar",3),c.Vb(2,"a",4),c.wc(3,"add"),c.Ub(),c.Ub(),c.uc(4,V,14,6,"mat-list-item",5),c.Sb()),2&t){const t=c.fc().$implicit,e=c.fc();c.Db(2),c.kc("relativeTo",e.route),c.Db(2),c.kc("ngForOf",t)}}function w(t,e){if(1&t&&(c.Vb(0,"mat-list"),c.uc(1,U,5,2,"ng-container",2),c.Ub()),2&t){const t=e.$implicit;c.fc();const n=c.nc(3);c.Db(1),c.kc("ngIf",t.length)("ngIfElse",n)}}function y(t,e){if(1&t&&(c.Vb(0,"div",10),c.Vb(1,"h3"),c.wc(2,"No inspections"),c.Ub(),c.Vb(3,"p"),c.Vb(4,"a",4),c.wc(5,"add"),c.Ub(),c.Ub(),c.Ub()),2&t){const t=c.fc();c.Db(4),c.kc("relativeTo",t.route)}}let k=(()=>{class t{constructor(t,e){this.route=t,this.inspectionService=e}ngOnInit(){const t=i(this.route.snapshot.root,"hiveId");t&&(this.inspections$=this.inspectionService.getInspections(t,5).pipe(Object(a.a)()))}queenPresentColor(t){return t.queen||t.eggs?"green":"red"}honeyString(t){return t.honey&&t.honeyClosed?`${t.honey} / ${t.honeyClosed}`:"n/a"}trendingIconName(t,e){if(!t||!e)return"compare_arrows";const n=t.health,o=e.health;return n>o?"trending_up":n<o?"trending_down":"compare_arrows"}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(r.a),c.Pb(m))},t.\u0275cmp=c.Jb({type:t,selectors:[["bee-inspection-list"]],decls:4,vars:3,consts:[[4,"ngIf"],["noInspections",""],[4,"ngIf","ngIfElse"],["justify","center"],["mat-raised-button","","routerLink","add",3,"relativeTo"],[4,"ngFor","ngForOf"],["matLine",""],["matLine","",1,"line"],[3,"color"],["aria-hidden","false","aria-label","Example home icon"],[1,"notification"]],template:function(t,e){1&t&&(c.uc(0,w,2,2,"mat-list",0),c.gc(1,"async"),c.uc(2,y,6,1,"ng-template",null,1,c.vc)),2&t&&c.kc("ngIf",c.hc(1,1,e.inspections$))},directives:[o.l,u.a,d.a,p.a,r.e,o.k,u.b,h.g,f.a,g.a],pipes:[o.b,v.a],styles:["mat-list-item[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;justify-content:space-between}mat-list-item[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center}bee-color-dot[_ngcontent-%COMP%], mat-icon[_ngcontent-%COMP%]{margin-left:.5rem}.notification[_ngcontent-%COMP%]{text-align:center}"]}),t})();var C=n("3Pt+"),O=n("IzEk"),P=n("vkgz"),D=n("Wp6s"),I=n("qFsG"),N=n("iadO"),x=n("kmnG"),M=n("xHqg"),_=n("5RNC"),G=n("1jcm");function B(t,e){1&t&&c.wc(0,"Honey super")}function S(t,e){1&t&&c.wc(0,"Hive body")}function q(t,e){1&t&&c.wc(0,"Overall")}function L(t,e){1&t&&c.wc(0,"Done")}const j=[{path:"",component:k},{path:"add",component:(()=>{class t{constructor(t,e,n,o){this.route=t,this.location=e,this.formBuilder=n,this.inspectionService=o,this.timestamp=new C.e({value:new Date,disabled:!0},C.p.required),this.honeySuperGroup=this.formBuilder.group({honey:[null],honeyClosed:[null]}),this.hiveBodyGroup=this.formBuilder.group({drones:[null],queen:[null],eggs:[null],larva:[null],closedBrood:[null],droneBrood:[null],queenBrood:[null]}),this.overallGroup=this.formBuilder.group({health:[null,C.p.required],remarks:[null]})}ngOnInit(){}formatLabel(t){return t?t+"%":""}submit(){const t=Object.assign(Object.assign(Object.assign({date:this.timestamp.value},this.honeySuperGroup.value),this.hiveBodyGroup.value),this.overallGroup.value),e=i(this.route.snapshot.root,"hiveId");e&&this.inspectionService.add(t,e).pipe(Object(O.a)(1),Object(P.a)(()=>this.location.back())).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(r.a),c.Pb(o.h),c.Pb(C.d),c.Pb(m))},t.\u0275cmp=c.Jb({type:t,selectors:[["bee-inspection-add"]],decls:77,vars:13,consts:[["matInput","",1,"timestamp-input",3,"formControl","matDatepicker"],["matSuffix","",3,"for"],["touchUi","","disabled","false"],["picker",""],[3,"linear"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"formGroup"],[1,"mat-form-field"],["max","100","min","0","step","5","tickInterval","5","thumbLabel","true","aria-label","honey","formControlName","honey",3,"displayWith"],["max","100","min","0","step","5","tickInterval","5","thumbLabel","true","aria-label","honey closed","formControlName","honeyClosed",3,"displayWith"],["mat-stroked-button","","color","primary","matStepperNext",""],[1,"form-field"],["formControlName","eggs"],["formControlName","larva"],["formControlName","closedBrood"],["formControlName","droneBrood"],["formControlName","queenBrood"],["formControlName","drones"],["formControlName","queen"],["mat-stroked-button","","matStepperPrevious",""],["mat-stroked-button","","matStepperNext","","color","primary"],["max","100","min","0","step","5","tickInterval","5","thumbLabel","true","aria-label","health","formControlName","health",3,"displayWith"],["matInput","","formControlName","remarks"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,e){if(1&t&&(c.Vb(0,"mat-card"),c.Vb(1,"mat-card-header"),c.Vb(2,"mat-card-title"),c.wc(3," Inspection "),c.Qb(4,"input",0),c.Qb(5,"mat-datepicker-toggle",1),c.Qb(6,"mat-datepicker",2,3),c.Ub(),c.Ub(),c.Vb(8,"mat-card-content"),c.Vb(9,"mat-vertical-stepper",4,5),c.Vb(11,"mat-step",6),c.uc(12,B,1,0,"ng-template",7),c.Vb(13,"form",8),c.Vb(14,"div",9),c.Vb(15,"mat-label"),c.wc(16,"Honey"),c.Ub(),c.Qb(17,"mat-slider",10),c.Ub(),c.Vb(18,"div",9),c.Vb(19,"mat-label"),c.wc(20,"Honey closed"),c.Ub(),c.Qb(21,"mat-slider",11),c.Ub(),c.Vb(22,"bee-button-bar"),c.Vb(23,"button",12),c.wc(24,"Next"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(25,"mat-step",6),c.uc(26,S,1,0,"ng-template",7),c.Vb(27,"form",8),c.Vb(28,"div",13),c.Vb(29,"mat-slide-toggle",14),c.wc(30,"Eggs"),c.Ub(),c.Ub(),c.Vb(31,"div",13),c.Vb(32,"mat-slide-toggle",15),c.wc(33,"Larva"),c.Ub(),c.Ub(),c.Vb(34,"div",13),c.Vb(35,"mat-slide-toggle",16),c.wc(36,"Closed brood"),c.Ub(),c.Ub(),c.Vb(37,"div",13),c.Vb(38,"mat-slide-toggle",17),c.wc(39,"Drone brood"),c.Ub(),c.Ub(),c.Vb(40,"div",13),c.Vb(41,"mat-slide-toggle",18),c.wc(42,"Queen brood"),c.Ub(),c.Ub(),c.Vb(43,"div",13),c.Vb(44,"mat-slide-toggle",19),c.wc(45,"Drones"),c.Ub(),c.Ub(),c.Vb(46,"div",13),c.Vb(47,"mat-slide-toggle",20),c.wc(48,"Queen"),c.Ub(),c.Ub(),c.Vb(49,"bee-button-bar"),c.Vb(50,"button",21),c.wc(51,"Back"),c.Ub(),c.Vb(52,"button",22),c.wc(53,"Next"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(54,"mat-step",6),c.uc(55,q,1,0,"ng-template",7),c.Vb(56,"form",8),c.Vb(57,"div",9),c.Vb(58,"mat-label"),c.wc(59,"Overall health"),c.Ub(),c.Qb(60,"mat-slider",23),c.Ub(),c.Vb(61,"div",9),c.Vb(62,"mat-label"),c.wc(63,"Remarks"),c.Ub(),c.Qb(64,"textarea",24),c.Ub(),c.Vb(65,"bee-button-bar"),c.Vb(66,"button",21),c.wc(67,"Back"),c.Ub(),c.Vb(68,"button",22),c.wc(69,"Next"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(70,"mat-step"),c.uc(71,L,1,0,"ng-template",7),c.Vb(72,"bee-button-bar"),c.Vb(73,"button",21),c.wc(74,"Back"),c.Ub(),c.Vb(75,"button",25),c.cc("click",function(){return e.submit()}),c.wc(76,"Done"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t){const t=c.nc(7);c.Db(4),c.kc("formControl",e.timestamp)("matDatepicker",t),c.Db(1),c.kc("for",t),c.Db(4),c.kc("linear",!0),c.Db(2),c.kc("stepControl",e.honeySuperGroup),c.Db(2),c.kc("formGroup",e.honeySuperGroup),c.Db(4),c.kc("displayWith",e.formatLabel),c.Db(4),c.kc("displayWith",e.formatLabel),c.Db(4),c.kc("stepControl",e.hiveBodyGroup),c.Db(2),c.kc("formGroup",e.hiveBodyGroup),c.Db(27),c.kc("stepControl",e.overallGroup),c.Db(2),c.kc("formGroup",e.overallGroup),c.Db(4),c.kc("displayWith",e.formatLabel)}},directives:[D.a,D.e,D.h,I.b,C.c,N.b,C.l,C.f,N.d,x.g,N.a,D.d,M.f,M.a,M.b,C.q,C.m,C.h,x.f,_.a,C.g,d.a,p.b,M.d,G.a,M.e],styles:[".form-field[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]{display:flex;padding:1rem 0;width:100%}.mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{align-self:center;display:inline-flex;width:150px}.mat-form-field[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{max-width:320px;width:100%}textarea[_ngcontent-%COMP%]{height:10rem;width:100%}.timestamp-input[_ngcontent-%COMP%]{border:none;background:transparent;color:inherit;font:inherit;width:7rem}"]}),t})()}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({imports:[[r.f.forChild(j)],r.f]}),t})();var Q=n("jAig"),$=n("PCNd");let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({imports:[[o.c,F,C.o,Q.a,$.a]]}),t})()}}]);