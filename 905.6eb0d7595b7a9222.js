"use strict";var L=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,h=(m,u)=>{var o={};for(var e in m)J.call(m,e)&&u.indexOf(e)<0&&(o[e]=m[e]);if(null!=m&&L)for(var e of L(m))u.indexOf(e)<0&&z.call(m,e)&&(o[e]=m[e]);return o};(self.webpackChunkbeez=self.webpackChunkbeez||[]).push([[905],{1905:(m,u,o)=>{o.r(u),o.d(u,{LedgerEntryType:()=>s,LedgerModule:()=>W,LedgerRoutingModule:()=>M,LegderComponent:()=>y});var e=o(3668),E=o(5667),c=o(3050),T=o(5947),O=o(9468),D=o(7384),P=o(7717),U=o(6388),d=o(888),a=o(9133),g=o(8167),Z=o(8727),_=o(25),x=o(86),q=o(138),f=o(1953),v=o(2663),p=o(6019),b=o(6731);function F(n,i){if(1&n&&(e.TgZ(0,"mat-list-item",2),e.TgZ(1,"div",3),e.TgZ(2,"span",4),e._uU(3),e.ALo(4,"timestamp"),e.qZA(),e.TgZ(5,"span",5),e._uU(6),e.qZA(),e.TgZ(7,"span",6),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.qZA(),e.TgZ(10,"p",7),e._uU(11),e.qZA(),e.qZA()),2&n){const t=i.$implicit;e.xp6(3),e.Oqu(e.xi3(4,4,t.date,"MM-dd-yyyy HH:ss")),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(9,7,t.amount)),e.xp6(3),e.Oqu(t.comment)}}let I=(()=>{class n{constructor(t,r){this.angularFirestore=t,this.authService=r}get collectionPath(){return`beez/${this.authService.uid}/ledger`}createEntry(t){return(0,T.D)(this.angularFirestore.collection(this.collectionPath).add(t))}getEntries(){return this.angularFirestore.collection(this.collectionPath,t=>t.orderBy("date","desc").limit(250)).valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(P.ST),e.LFG(U.e8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var s=(()=>{return(n=s||(s={})).expense="expense",n.income="income",s;var n})();let B=(()=>{class n{constructor(t){this.formBuilder=t,this.cancelEvent=new e.vpe,this.submitEvent=new e.vpe,this.form=this.formBuilder.group({type:[s.income,a.kI.required],date:[new Date],description:["",a.kI.required],amountEur:["",a.kI.required],amountCents:[""],comment:[""]})}cancel(){this.cancelEvent.emit(),this.resetForm()}submit(){var r,l;if(this.form.valid){const C=h(this.form.value,["amountEur","amountCents"]);C.amount=parseFloat(`${null==(r=this.form.get("amountEur"))?void 0:r.value}.${null==(l=this.form.get("amountCents"))?void 0:l.value}`),this.submitEvent.emit(C),this.resetForm()}}resetForm(){var t,r;this.form.reset(),null==(t=this.form.get("date"))||t.setValue(new Date),null==(r=this.form.get("type"))||r.setValue(s.income)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-ledger-entry-form"]],outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent"},decls:41,vars:22,consts:[[3,"formGroup","ngSubmit"],["appearance","fill",1,"date"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker",""],["appearance","fill",1,"amount-eur"],["matPrefix",""],["type","number","matInput","","formControlName","amountEur","autofocus",""],["matSuffix",""],["appearance","fill",1,"amount-cents"],["type","number","matInput","","matPostfix","","placeholder","00","formControlName","amountCents"],["appearance","fill",1,"description"],["matInput","","placeholder","Eg. Honey","formControlName","description","list","sell-list"],["id","sell-list"],["value","honey"],["appearance","fill",1,"full-width"],["matInput","","placeholder","comment","formControlName","comment"],["justify","right"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","type","submit","color","primary",3,"disabled"]],template:function(t,r){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(1,"div"),e.TgZ(2,"mat-form-field",1),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"i18nextCap"),e.qZA(),e._UZ(6,"input",2),e._UZ(7,"mat-datepicker-toggle",3),e._UZ(8,"mat-datepicker",4,5),e.qZA(),e.qZA(),e.TgZ(10,"div"),e.TgZ(11,"mat-form-field",6),e.TgZ(12,"mat-label"),e._uU(13),e.ALo(14,"i18nextCap"),e.qZA(),e.TgZ(15,"span",7),e._uU(16,"EUR \xa0"),e.qZA(),e._UZ(17,"input",8),e.TgZ(18,"span",9),e._uU(19,","),e.qZA(),e.qZA(),e.TgZ(20,"mat-form-field",10),e._UZ(21,"input",11),e.qZA(),e.TgZ(22,"mat-form-field",12),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"i18nextCap"),e.qZA(),e._UZ(26,"input",13),e.qZA(),e.TgZ(27,"datalist",14),e._UZ(28,"option",15),e.qZA(),e.qZA(),e.TgZ(29,"mat-form-field",16),e.TgZ(30,"mat-label"),e._uU(31),e.ALo(32,"i18nextCap"),e.qZA(),e._UZ(33,"textarea",17),e.qZA(),e.TgZ(34,"bee-button-bar",18),e.TgZ(35,"button",19),e.NdJ("click",function(){return r.cancel()}),e._uU(36),e.ALo(37,"i18nextCap"),e.qZA(),e.TgZ(38,"button",20),e._uU(39),e.ALo(40,"i18nextCap"),e.qZA(),e.qZA(),e.qZA()),2&t){const l=e.MAs(9);e.Q6J("formGroup",r.form),e.xp6(4),e.Oqu(e.lcZ(5,10,"date")),e.xp6(2),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(6),e.Oqu(e.lcZ(14,12,"amount")),e.xp6(11),e.Oqu(e.lcZ(25,14,"description")),e.xp6(7),e.Oqu(e.lcZ(32,16,"sentence.leaveComment")),e.xp6(5),e.Oqu(e.lcZ(37,18,"cancel")),e.xp6(2),e.Q6J("disabled",r.form.invalid||r.form.pristine),e.xp6(1),e.Oqu(e.lcZ(40,20,"save"))}},directives:[a._Y,a.JL,a.sg,g.KE,g.hX,q.Nt,a.Fj,Z.hl,a.JJ,a.u,Z.nW,g.R9,Z.Mq,g.qo,a.wV,a.YN,a.Kr,_.N3,x.lW],pipes:[f.Mz],styles:[".form-field-group[_ngcontent-%COMP%]{display:flex;width:100%}.date[_ngcontent-%COMP%]{margin-right:.5rem}.amount-eur[_ngcontent-%COMP%]{text-align:right;width:7rem}.amount-cents[_ngcontent-%COMP%]{margin-right:.5rem;width:2.5rem}.description[_ngcontent-%COMP%]{width:8.3rem}.full-width[_ngcontent-%COMP%]{width:100%}"]}),n})(),R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-entry-list"]],inputs:{entries:"entries"},decls:2,vars:1,consts:[["role","list"],["role","listitem",4,"ngFor","ngForOf"],["role","listitem"],["matLine","",1,"line"],[1,"date"],[1,"description"],[1,"amount"],["matLine","",1,"comments"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-list",0),e.YNc(1,F,12,9,"mat-list-item",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",r.entries))},directives:[v.i$,p.sg,v.Tg,b.X2],pipes:[_.dS,p.H9],styles:[".mat-line.line[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.comments[_ngcontent-%COMP%]{font-size:.8em;opacity:.75}.amount[_ngcontent-%COMP%]{text-align:right}"]}),n})(),K=(()=>{class n{transform(t){return t&&t.length>0?t.reduce((r,l)=>r+l.amount,0):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"sum",type:n,pure:!0}),n})(),y=(()=>{class n{constructor(t,r){this.ledgerService=t,this.route=r}ngOnInit(){this.year=this.route.snapshot.paramMap.get("year")||(new Date).getFullYear(),this.entries$=this.ledgerService.getEntries()}addEntry(t){this.ledgerService.createEntry(t).pipe((0,O.q)(1),(0,D.b)(()=>this.collapse())).subscribe()}collapse(){this.expansionPanel.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I),e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bee-legder"]],viewQuery:function(t,r){if(1&t&&e.Gf(c.ib,5),2&t){let l;e.iGM(l=e.CRH())&&(r.expansionPanel=l.first)}},decls:24,vars:26,consts:[[3,"cancelEvent","submitEvent"],[3,"entries"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-header"),e.TgZ(2,"mat-card-title"),e._uU(3),e.ALo(4,"i18nextCap"),e.ALo(5,"i18next"),e.qZA(),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"mat-expansion-panel"),e.TgZ(8,"mat-expansion-panel-header"),e.TgZ(9,"mat-panel-title"),e._uU(10),e.ALo(11,"i18nextCap"),e.qZA(),e.TgZ(12,"mat-panel-description"),e._uU(13),e.ALo(14,"i18nextCap"),e.qZA(),e.qZA(),e.TgZ(15,"bee-ledger-entry-form",0),e.NdJ("cancelEvent",function(){return r.collapse()})("submitEvent",function(A){return r.addEntry(A)}),e.qZA(),e.qZA(),e._UZ(16,"bee-entry-list",1),e.ALo(17,"async"),e.qZA(),e.TgZ(18,"mat-card-footer"),e._uU(19),e.ALo(20,"i18nextCap"),e.ALo(21,"currency"),e.ALo(22,"sum"),e.ALo(23,"async"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.lnq("",e.lcZ(4,8,"ledger.ledger")," ",e.lcZ(5,10,"ledger.for")," ",r.year,""),e.xp6(7),e.hij(" ",e.lcZ(11,12,"add")," + "),e.xp6(3),e.hij(" ",e.lcZ(14,14,"ledger.sentence.addNewEntry")," "),e.xp6(3),e.Q6J("entries",e.lcZ(17,16,r.entries$)),e.xp6(3),e.AsE(" ",e.lcZ(20,18,"total"),": ",e.lcZ(21,20,e.lcZ(22,22,e.lcZ(23,24,r.entries$)))," "))},directives:[d.a8,d.dk,d.n5,d.dn,c.ib,c.yz,c.yK,c.u4,B,R,d.rt],pipes:[f.Mz,f.e3,p.Ov,p.H9,K],styles:["mat-card-footer[_ngcontent-%COMP%]{background-color:#fff;bottom:0;padding:1rem 2rem;position:sticky;text-align:right}"]}),n})();const S=[{path:":year",component:y},{path:"**",redirectTo:(new Date).getFullYear().toString()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[E.Bz.forChild(S)],E.Bz]}),n})(),W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,_.Kk,f.zH,M,_.qX,a.UX]]}),n})()}}]);